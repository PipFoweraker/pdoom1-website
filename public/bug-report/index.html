<!DOCTYPE html>
<html lang="en-AU">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Report a Bug - p(Doom)1</title>
	<link rel="canonical" href="https://pdoom1.com/bug-report/" />
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" />
	<meta name="description" content="Report bugs, request features, or submit issues for p(Doom)1 - AI Safety Strategy Game. Upload logs and screenshots to help us improve the game." />
	<meta name="author" content="p(Doom)1" />
	<meta property="og:type" content="website" />
	<meta property="og:site_name" content="p(Doom)1" />
	<meta property="og:title" content="Report a Bug - p(Doom)1" />
	<meta property="og:description" content="Report issues and help improve p(Doom)1 - the AI Safety Strategy Game." />
	<meta property="og:url" content="https://pdoom1.com/bug-report/" />
	<meta property="og:image" content="https://pdoom1.com/assets/pdoom_logo_1.png" />
	<meta name="twitter:card" content="summary_large_image" />
	<style>
		:root {
			--bg-primary: #1a1a1a;
			--bg-secondary: #2d2d2d;
			--bg-tertiary: #3d3d3d;
			--text-primary: #ffffff;
			--text-secondary: #cccccc;
			--text-muted: #888888;
			--accent-primary: #00ff41;
			--accent-secondary: #ff6b35;
			--accent-danger: #ff4444;
			--border-color: #444444;
			--success-color: #4caf50;
			--radius-sm: 4px;
			--radius-md: 6px;
			--radius-lg: 10px;
			--border-width: 1px;
			--shadow-button: 0 10px 20px rgba(0, 255, 65, 0.3);
			--duration-fast: 150ms;
			--duration-base: 300ms;
			--easing: cubic-bezier(0.2, 0.8, 0.2, 1);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Courier New', monospace;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			background-image: 
				radial-gradient(circle at 25% 25%, rgba(0, 255, 65, 0.02) 0%, transparent 50%),
				radial-gradient(circle at 75% 75%, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
		}

		header {
			background: var(--bg-secondary);
			border-bottom: 2px solid var(--accent-primary);
			padding: 1rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		nav {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 2rem;
		}

		.logo-container {
			display: flex;
			flex-direction: column;
			align-items: flex-start;
		}

		.designer-credit {
			font-size: 0.75rem;
			color: var(--text-muted);
			font-weight: normal;
			margin-bottom: -0.2rem;
			letter-spacing: 0.5px;
		}

		.logo {
			font-size: 1.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			text-decoration: none;
			text-shadow: 0 0 10px var(--accent-primary);
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			list-style: none;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			transition: color var(--duration-base) var(--easing);
		}

		.nav-links a:hover {
			color: var(--accent-primary);
		}

		main {
			max-width: 800px;
			margin: 0 auto;
			padding: 3rem 2rem;
		}

		h1 {
			color: var(--accent-primary);
			text-shadow: 0 0 10px var(--accent-primary);
			margin-bottom: 1rem;
			font-size: 2.5rem;
		}

		.intro {
			color: var(--text-secondary);
			margin-bottom: 2rem;
			font-size: 1.1rem;
		}

		.form-container {
			background: var(--bg-secondary);
			border: 2px solid var(--border-color);
			border-radius: var(--radius-lg);
			padding: 2rem;
			margin-top: 2rem;
		}

		.form-group {
			margin-bottom: 1.5rem;
		}

		label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
			font-weight: bold;
		}

		input[type="text"],
		input[type="email"],
		input[type="file"],
		textarea,
		select {
			width: 100%;
			padding: 0.75rem;
			background: var(--bg-tertiary);
			border: 1px solid var(--border-color);
			border-radius: var(--radius-sm);
			color: var(--text-primary);
			font-family: inherit;
			font-size: 1rem;
			transition: border-color var(--duration-base) var(--easing);
		}

		input:focus,
		textarea:focus,
		select:focus {
			outline: none;
			border-color: var(--accent-primary);
		}

		textarea {
			resize: vertical;
			min-height: 120px;
		}

		.form-help {
			font-size: 0.875rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		.error-message {
			color: var(--accent-danger);
			font-size: 0.875rem;
			margin-top: 0.25rem;
			min-height: 1.25rem;
		}

		.cta-button {
			background: var(--accent-primary);
			color: var(--bg-primary);
			border: none;
			padding: 1rem 2rem;
			font-size: 1rem;
			font-weight: bold;
			cursor: pointer;
			border-radius: var(--radius-md);
			transition: all var(--duration-base) var(--easing);
			font-family: inherit;
			box-shadow: var(--shadow-button);
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.cta-button:hover {
			transform: translateY(-2px);
			box-shadow: 0 15px 30px rgba(0, 255, 65, 0.4);
		}

		.cta-button:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		#submit-status {
			margin-top: 1rem;
			text-align: center;
			font-weight: bold;
			min-height: 1.5rem;
		}

		footer {
			background: var(--bg-secondary);
			border-top: 2px solid var(--accent-primary);
			padding: 2rem 0;
			margin-top: 4rem;
			text-align: center;
		}

		.footer-content {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 2rem;
			color: var(--text-muted);
		}

		@media (max-width: 768px) {
			nav {
				flex-direction: column;
				gap: 1rem;
			}

			.nav-links {
				flex-direction: column;
				gap: 0.5rem;
				text-align: center;
			}

			main {
				padding: 2rem 1rem;
			}

			h1 {
				font-size: 2rem;
			}

			.form-container {
				padding: 1.5rem;
			}
		}
	</style>
</head>
<body>
	<a href="#main-content" class="skip-link">Skip to main content</a>

	<header role="banner">
		<nav role="navigation" aria-label="Main navigation">
			<div class="logo-container">
				<div class="designer-credit">Pip Foweraker's</div>
				<a href="/" class="logo" aria-label="p(Doom)1 home">p(Doom)1</a>
			</div>
			<ul class="nav-links" role="menubar">
				<li role="none"><a href="/#game" role="menuitem">Game</a></li>
				<li role="none"><a href="/leaderboard/" role="menuitem">Leaderboard</a></li>
				<li role="none"><a href="/stats/" role="menuitem">Stats</a></li>
				<li role="none"><a href="/#contact" role="menuitem">Contact</a></li>
			</ul>
		</nav>
	</header>

	<main id="main-content" role="main">
		<h1>Report a Bug</h1>
		<p class="intro">
			Found a bug or need help? Report issues directly through our GitHub integration. 
			You can attach log files, screenshots, or config files to help us debug faster.
		</p>

		<div class="form-container">
			<form id="bug-report-form" role="form" novalidate>
				<div class="form-group">
					<label for="bug-title">Issue Title <span aria-label="required">*</span></label>
					<input type="text" id="bug-title" name="title" required 
						   placeholder="Brief description of the issue"
						   aria-describedby="title-error"
						   autocomplete="off">
					<div id="title-error" class="error-message" role="alert" aria-live="polite"></div>
				</div>

				<div class="form-group">
					<label for="bug-type">Bug Type</label>
					<select id="bug-type" name="type" aria-describedby="type-help">
						<option value="bug">[Bug] Bug Report</option>
						<option value="feature">Feature Request</option>
						<option value="documentation">Documentation Issue</option>
						<option value="performance">Performance Issue</option>
					</select>
					<div id="type-help" class="form-help">Select the category that best describes your issue</div>
				</div>

				<div class="form-group">
					<label for="bug-description">Description <span aria-label="required">*</span></label>
					<textarea id="bug-description" name="description" rows="8" required 
						placeholder="Detailed description of the issue, including steps to reproduce..."
						aria-describedby="description-error description-help"></textarea>
					<div id="description-help" class="form-help">Include steps to reproduce, expected behavior, and actual behavior</div>
					<div id="description-error" class="error-message" role="alert" aria-live="polite"></div>
				</div>

				<div class="form-group">
					<label for="user-email">Email (Optional)</label>
					<input type="email" id="user-email" name="email" 
						   placeholder="your.email@example.com"
						   aria-describedby="email-help email-error"
						   autocomplete="email">
					<div id="email-help" class="form-help">Only used for follow-up questions. Not stored or shared.</div>
					<div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
				</div>

				<div class="form-group">
					<label for="bug-attachment">Attach Log/File (Optional)</label>
					<input type="file" id="bug-attachment" name="attachment" 
						   accept=".txt,.log,.json,.zip,.png,.jpg,.jpeg"
						   aria-describedby="attachment-help attachment-error">
					<div id="attachment-help" class="form-help">Upload logs, screenshots, or config files (max 500 KB). Supported: .txt, .log, .json, .zip, .png, .jpg</div>
					<div id="attachment-error" class="error-message" role="alert" aria-live="polite"></div>
				</div>

				<button type="submit" class="cta-button" style="width: 100%;" 
						aria-describedby="submit-status">
					Submit Bug Report
				</button>
				<div id="submit-status" role="status" aria-live="polite"></div>
			</form>
		</div>
	</main>

	<footer role="contentinfo">
		<div class="footer-content">
			<p>&copy; 2025 pdoom1. Not affiliated with any AI organization. For fun, education, and satire only.</p>
			<p>Privacy: No personal data collected | <a href="/" style="color: var(--accent-primary);">Back to Home</a></p>
		</div>
	</footer>

	<script>
		// Bug report form submission -> shared backend
		document.getElementById('bug-report-form').addEventListener('submit', async function(e) {
			e.preventDefault();
			
			const button = e.target.querySelector('button[type="submit"]');
			const originalText = button.textContent;
			button.disabled = true;
			
			// Clear previous error messages
			document.getElementById('attachment-error').textContent = '';
			
			try {
				const formData = new FormData(e.target);
				const bugData = {
					title: formData.get('title'),
					type: formData.get('type') || 'bug',
					description: formData.get('description'),
					email: formData.get('email') || '',
					source: 'web'
				};
				
				// Handle file attachment
				const fileInput = document.getElementById('bug-attachment');
				const file = fileInput.files[0];
				if (file) {
					// Validate file size (max 500 KB)
					const maxSize = 500 * 1024; // 500 KB in bytes
					if (file.size > maxSize) {
						document.getElementById('attachment-error').textContent = 
							`File too large: ${Math.round(file.size/1024)} KB. Maximum size is 500 KB.`;
						button.disabled = false;
						return;
					}
					
					// Read file as base64
					button.textContent = 'Reading file...';
					const fileContent = await new Promise((resolve, reject) => {
						const reader = new FileReader();
						reader.onload = () => resolve(reader.result.split(',')[1]); // Get base64 part only
						reader.onerror = reject;
						reader.readAsDataURL(file);
					});
					
					bugData.attachment = {
						filename: file.name,
						content: fileContent,
						size: file.size,
						type: file.type
					};
				}
				
				// Local mock: when running on localhost, simulate a successful submission
				const isLocal = ['localhost','127.0.0.1','[::1]'].includes(window.location.hostname) || 
					window.location.hostname.startsWith('192.168.') ||
					window.location.port === '8002' ||
					window.location.href.includes('localhost');
				
				if (isLocal) {
					button.textContent = 'Submitting...';
					await new Promise(r => setTimeout(r, 400));
					button.textContent = '[OK] Report Submitted! (local mock)';
					button.style.background = 'var(--success-color)';
					setTimeout(() => {
						button.textContent = originalText;
						button.style.background = '';
						e.target.reset();
						button.disabled = false;
					}, 2000);
					return;
				}
				
				// Production API submission
				button.textContent = 'Submitting...';
				const base = (window.__PDOOM_CONFIG__ && window.__PDOOM_CONFIG__.apiBase) || '';
				const url = (base ? base.replace(/\/$/, '') : '') + '/api/report-bug';
				const res = await fetch(url, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify(bugData)
				});
				if (!res.ok) throw new Error('Failed to submit');
				button.textContent = '[OK] Report Submitted!';
				button.style.background = 'var(--success-color)';
				setTimeout(() => {
					button.textContent = originalText;
					button.style.background = '';
					e.target.reset();
					button.disabled = false;
				}, 3000);
				
			} catch (err) {
				button.textContent = '[ERROR] Submit Failed';
				button.style.background = 'var(--accent-danger)';
				setTimeout(() => {
					button.textContent = originalText;
					button.style.background = '';
					button.disabled = false;
				}, 3000);
			}
		});
	</script>
</body>
</html>
