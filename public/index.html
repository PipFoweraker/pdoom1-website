<!DOCTYPE html>
<html lang="en-AU">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>p(Doom)1 - AI Safety Strategy Game</title>
	<link rel="canonical" href="https://pdoom1.com/" />
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" />
	<meta name="description" content="p(Doom)1 is a satirical meta-strategy game about AI Safety. Manage labs, policy, and p(doom) while avoiding catastrophic outcomes." />
	<meta name="author" content="p(Doom)1" />
	<meta property="og:type" content="website" />
	<meta property="og:site_name" content="p(Doom)1" />
	<meta property="og:title" content="p(Doom)1 - AI Safety Strategy Game" />
	<meta property="og:description" content="A satirical meta-strategy game about AI Safety." />
	<meta property="og:url" content="https://pdoom1.com/" />
	<meta property="og:image" content="https://pdoom1.com/assets/pdoom_logo_1.png" />
	<meta name="twitter:card" content="summary_large_image" />
	<!-- twitter:site intentionally omitted until handle is finalized (must be ASCII, suggest @pdoom1) -->
	<style>
		:root {
			/* Color scheme inspired by typical pygame/terminal aesthetics */
			--bg-primary: #1a1a1a;
			--bg-secondary: #2d2d2d;
			--bg-tertiary: #3d3d3d;
			--text-primary: #ffffff;
			--text-secondary: #cccccc;
			--text-muted: #888888;
			--accent-primary: #00ff41;  /* Matrix green */
			--accent-secondary: #ff6b35; /* Warning orange */
			--accent-danger: #ff4444;   /* Error red */
			--border-color: #444444;
			--success-color: #4caf50;

			/* Tokens that may be injected from /design/tokens.json */
			--radius-sm: 4px;
			--radius-md: 6px;
			--radius-lg: 10px;
			--border-width: 1px;
			--shadow-button: 0 10px 20px rgba(0, 255, 65, 0.3);
			--duration-fast: 150ms;
			--duration-base: 300ms;
			--easing: cubic-bezier(0.2, 0.8, 0.2, 1);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Courier New', monospace;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			background-image: 
				radial-gradient(circle at 25% 25%, rgba(0, 255, 65, 0.02) 0%, transparent 50%),
				radial-gradient(circle at 75% 75%, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
		}

		header {
			background: var(--bg-secondary);
			border-bottom: 2px solid var(--accent-primary);
			padding: 0.8rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		nav {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 2rem;
		}

		.logo-container {
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: 0.5rem;
		}

		.designer-credit {
			font-size: 0.85rem;
			color: var(--text-muted);
			font-weight: normal;
			letter-spacing: 0.5px;
		}

		.logo {
			font-size: 1.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			text-decoration: none;
			text-shadow: 0 0 10px var(--accent-primary);
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			list-style: none;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			transition: color var(--duration-base) var(--easing);
			padding: 0.5rem 1rem;
			border: 1px solid transparent;
			font-size: 1.1rem;
			font-weight: 600;
		}

		.nav-links a:hover {
			color: var(--accent-primary);
			border-color: var(--accent-primary);
		}

		/* Dropdown Navigation */
		.dropdown {
			position: relative;
		}

		.dropdown-toggle {
			cursor: pointer;
		}

		.dropdown-menu {
			position: absolute;
			top: 100%;
			right: 0;
			background: var(--bg-secondary);
			border: 1px solid var(--border-color);
			border-radius: var(--radius-md);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all var(--duration-base) var(--easing);
			min-width: 150px;
			z-index: 1000;
			list-style: none;
			padding: 0.5rem 0;
			margin: 0;
		}

		.dropdown:hover .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.dropdown-menu li {
			margin: 0;
		}

		.dropdown-menu a {
			display: block;
			padding: 0.5rem 1rem;
			color: var(--text-secondary);
			text-decoration: none;
			border: none;
			transition: all var(--duration-fast) ease;
		}

		.dropdown-menu a:hover {
			background: var(--bg-tertiary);
			color: var(--accent-primary);
			border-radius: 0;
		}

		main {
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
		}

		.hero {
			text-align: center;
			padding: 2.5rem 0;
			background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
			border-radius: var(--radius-lg, 10px);
			margin-bottom: 3rem;
			border: var(--border-width, 1px) solid var(--border-color);
		}

		.hero h1 {
			font-size: 3rem;
			margin-bottom: 1rem;
			color: var(--accent-primary);
			text-shadow: 0 0 20px var(--accent-primary);
		}

		.hero .subtitle {
			font-size: 1.2rem;
			color: var(--text-secondary);
			margin-bottom: 2rem;
		}

		.cta-button {
			display: inline-block;
			background: linear-gradient(45deg, var(--accent-primary), var(--success-color));
			color: var(--bg-primary);
			padding: 1rem 2rem;
			text-decoration: none;
			border-radius: var(--radius-md, 6px);
			font-weight: bold;
			transition: transform var(--duration-base) var(--easing), box-shadow var(--duration-base) var(--easing);
			border: none;
			cursor: pointer;
			font-family: inherit;
			font-size: 1rem;
		}

		.cta-button:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-button, 0 10px 20px rgba(0, 255, 65, 0.3));
		}

		.section {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 2rem;
			margin-bottom: 2rem;
		}

		.section h2 {
			color: var(--accent-secondary);
			margin-bottom: 1rem;
			font-size: 1.8rem;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 2rem;
			margin-top: 2rem;
		}

		.card {
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 1.5rem;
			transition: transform var(--duration-base) var(--easing), border-color var(--duration-base) var(--easing);
		}

		.card:hover {
			transform: translateY(-5px);
			border-color: var(--accent-primary);
		}

		.card h3 {
			color: var(--accent-primary);
			margin-bottom: 1rem;
		}

		.stats {
			display: flex;
			justify-content: space-around;
			text-align: center;
			padding: 2rem 0;
		}

		.stat {
			flex: 1;
		}

		.stat-number {
			font-size: 2.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			display: block;
		}

		.stat-label {
			color: var(--text-muted);
			font-size: 0.9rem;
		}

		.stat-link {
			text-decoration: none;
			color: inherit;
			transition: all var(--duration-base) var(--easing);
			border-radius: var(--radius-md);
			padding: 1rem;
			margin: 0 0.5rem;
			display: block;
		}

		.stat-link:hover {
			background: var(--bg-secondary);
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 255, 65, 0.2);
		}

		.stat-link:hover .stat-number {
			color: var(--accent-secondary);
			text-shadow: 0 0 10px var(--accent-secondary);
		}

		.roadmap-card:hover {
			border-color: var(--accent-primary);
			background: var(--bg-tertiary);
		}

		.form-container {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 2rem;
			max-width: 600px;
			margin: 2rem auto;
		}

		.form-group {
			margin-bottom: 1.5rem;
		}

		label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
		}

		input, textarea, select {
			width: 100%;
			padding: 0.8rem;
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-sm, 4px);
			color: var(--text-primary);
			font-family: inherit;
		}

		input:focus, textarea:focus, select:focus {
			outline: none;
			border-color: var(--accent-primary);
			box-shadow: 0 0 0 2px rgba(0, 255, 65, 0.2);
		}

		.form-help {
			font-size: 0.85rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		.error-message {
			font-size: 0.85rem;
			color: var(--accent-danger);
			margin-top: 0.25rem;
			display: none;
		}

		.error-message.visible {
			display: block;
		}

		input[aria-invalid="true"], 
		textarea[aria-invalid="true"], 
		select[aria-invalid="true"] {
			border-color: var(--accent-danger);
			box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.2);
		}

		/* FAQ Section Styling */
		.faq-item summary {
			list-style: none;
			position: relative;
			padding-right: 2rem;
		}

		.faq-item summary::-webkit-details-marker {
			display: none;
		}

		.faq-item summary::after {
			content: '+';
			position: absolute;
			right: 0;
			top: 0;
			font-size: 1.2rem;
			color: var(--accent-primary);
			transition: transform var(--duration-base) var(--easing);
		}

		.faq-item[open] summary::after {
			transform: rotate(45deg);
		}

		.faq-item[open] {
			border-color: var(--accent-primary);
		}

		.faq-item summary:hover {
			color: var(--accent-secondary);
		}

		footer {
			background: var(--bg-secondary);
			border-top: 2px solid var(--accent-primary);
			text-align: center;
			padding: 2rem;
			margin-top: 4rem;
			color: var(--text-muted);
		}

		.status-indicator {
			display: inline-block;
			width: 12px;
			height: 12px;
			border-radius: 50%;
			margin-right: 0.5rem;
			animation: pulse 2s infinite;
		}

		.status-active {
			background: var(--success-color);
		}

		.status-warning {
			background: var(--accent-secondary);
		}

		@keyframes pulse {
			0% { opacity: 1; }
			50% { opacity: 0.5; }
			100% { opacity: 1; }
		}

		/* Keyboard navigation and focus styles */
		.skip-link {
			position: absolute;
			top: -40px;
			left: 6px;
			background: var(--accent-primary);
			color: var(--bg-primary);
			padding: 8px;
			text-decoration: none;
			border-radius: var(--radius-sm);
			font-weight: bold;
			z-index: 1000;
		}

		.skip-link:focus {
			top: 6px;
		}

		/* Enhanced focus indicators */
		a:focus, button:focus, input:focus, textarea:focus, select:focus {
			outline: 2px solid var(--accent-primary);
			outline-offset: 2px;
		}

		/* High contrast mode support */
		@media (prefers-contrast: high) {
			:root {
				--bg-primary: #000000;
				--bg-secondary: #1a1a1a;
				--text-primary: #ffffff;
				--accent-primary: #00ff00;
				--border-color: #666666;
			}
		}

		/* Reduced motion support */
		@media (prefers-reduced-motion: reduce) {
			* {
				animation-duration: 0.01ms !important;
				animation-iteration-count: 1 !important;
				transition-duration: 0.01ms !important;
			}
		}

		/* AI Safety Resources Section */
		.resources-container {
			max-width: 100%;
		}

		.resource-category {
			margin-bottom: 3rem;
		}

		.resource-category:last-child {
			margin-bottom: 0;
		}

		.resource-card {
			position: relative;
			transition: all var(--duration-base) var(--easing);
		}

		.resource-card:hover {
			transform: translateY(-3px);
			border-color: var(--accent-primary);
			box-shadow: 0 4px 8px rgba(0, 255, 65, 0.1);
		}

		.resource-card h4 {
			margin: 0 0 0.75rem 0;
			color: var(--text-primary);
		}

		.resource-card h4 a {
			color: var(--accent-primary);
			text-decoration: none;
			font-size: 1rem;
			font-weight: bold;
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
		}

		.resource-card h4 a:hover {
			text-decoration: underline;
		}

		.resource-card h4 a::after {
			content: "↗";
			font-size: 0.8rem;
			opacity: 0.7;
			transition: opacity var(--duration-base) var(--easing);
		}

		.resource-card h4 a:hover::after {
			opacity: 1;
		}

		.resource-card p {
			color: var(--text-secondary);
			margin: 0 0 1rem 0;
			line-height: 1.5;
			font-size: 0.9rem;
		}

		.resource-tag {
			display: inline-block;
			background: var(--bg-primary);
			color: var(--accent-primary);
			padding: 0.25rem 0.5rem;
			border-radius: var(--radius-sm);
			font-size: 0.75rem;
			font-weight: bold;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			border: 1px solid var(--accent-primary);
		}

		@media (max-width: 768px) {
			nav {
				flex-direction: column;
				gap: 1rem;
				padding: 1rem;
			}

			.logo-container {
				align-items: center;
			}

			.nav-links {
				gap: 1rem;
				flex-wrap: wrap;
				justify-content: center;
			}

			.dropdown-menu {
				position: static;
				opacity: 1;
				visibility: visible;
				transform: none;
				box-shadow: none;
				border: 1px solid var(--border-color);
				background: var(--bg-tertiary);
				display: none;
				margin-top: 0.5rem;
				border-radius: var(--radius-sm);
			}

			.dropdown-toggle[aria-expanded="true"] + .dropdown-menu,
			.dropdown:hover .dropdown-menu {
				display: block;
			}
            
			.hero h1 {
				font-size: 2rem;
			}
            
			main {
				padding: 1rem;
			}
		}
	</style>
	<script>
		// Load optional runtime config for non-Netlify hosting (e.g., DreamHost)
		window.__PDOOM_CONFIG__ = {};
		window.__PDOOM_STATUS__ = {};
		
		(async function loadConfig(){
			try {
				const res = await fetch('config.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_CONFIG__ = await res.json();
					// Apply contact email if present
					const email = window.__PDOOM_CONFIG__.contactEmail;
					if (email) {
						const link = document.getElementById('contact-email-link');
						if (link) {
							link.href = `mailto:${email}`;
							link.textContent = email;
						}
					}
				}
			} catch (_) {}
		})();
		
		// Load game status and update UI
		(async function loadGameStatus(){
			try {
				const res = await fetch('data/status.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_STATUS__ = await res.json();
					updateGameStatusUI();
				}
			} catch (_) {}
		})();
		
		function updateGameStatusUI() {
			const status = window.__PDOOM_STATUS__;
			if (!status.game) return;
			
			// Update hero section with current game info
			const heroSubtitle = document.querySelector('.hero .subtitle');
			if (heroSubtitle && status.game.warning) {
				const warningEl = document.createElement('div');
				warningEl.style.cssText = 'color: var(--accent-danger); font-weight: bold; margin-top: 1rem; padding: 0.5rem; background: rgba(255, 68, 68, 0.1); border-radius: var(--radius-sm); border: 1px solid var(--accent-danger);';
				warningEl.innerHTML = `Warning: ${status.game.warning}`;
				heroSubtitle.parentNode.insertBefore(warningEl, heroSubtitle.nextSibling);
			}
			
			// Update download link with latest release info
			const ctaButton = document.querySelector('.cta-button');
			if (ctaButton && status.game.latestRelease) {
				ctaButton.href = status.game.repository || ctaButton.href;
				ctaButton.innerHTML = `Download ${status.game.latestRelease.version || 'Latest'} (GitHub)`;
			}
			
			// Add game status info to the page
			const aboutSection = document.getElementById('about');
			if (aboutSection && status.game.development) {
				const statusInfo = document.createElement('div');
				statusInfo.style.cssText = 'margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-primary);';
				statusInfo.innerHTML = `
					<h3 style="color: var(--accent-primary); margin-bottom: 1rem;">[WIP] Current Development Status</h3>
					<p><strong>Phase:</strong> ${status.game.development.phase}</p>
					<p><strong>Progress:</strong> ${status.game.development.progress}</p>
					<p><strong>Latest Release:</strong> <a href="${status.game.latestRelease?.downloadUrl || status.game.repository}" style="color: var(--accent-primary);">${status.game.latestRelease?.version || 'Check GitHub'}</a></p>
					<p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
						Released: ${status.game.latestRelease?.date || 'N/A'} | 
						${status.game.latestRelease?.changelog || 'See repository for details'}
					</p>
				`;
				aboutSection.appendChild(statusInfo);
			}
			
			// Update footer with website version
			const versionElement = document.getElementById('website-version');
			if (versionElement && status.website) {
				versionElement.textContent = `Website v${status.website.version}`;
			}
		}
		// Runtime tokens loader: pulls design/tokens.json and applies to :root
		(async function loadTokens() {
			try {
				const res = await fetch('design/tokens.json', { cache: 'no-store' });
				if (!res.ok) return;
				const t = await res.json();
				const r = document.documentElement;
				const set = (k, v) => v != null && r.style.setProperty(k, String(v));
				if (t.colors) {
					set('--bg-primary', t.colors.bgPrimary);
					set('--bg-secondary', t.colors.bgSecondary);
					set('--bg-tertiary', t.colors.bgTertiary);
					set('--text-primary', t.colors.textPrimary);
					set('--text-secondary', t.colors.textSecondary);
					set('--text-muted', t.colors.textMuted);
					set('--accent-primary', t.colors.accentPrimary);
					set('--accent-secondary', t.colors.accentSecondary);
					set('--accent-danger', t.colors.accentDanger);
					set('--border-color', t.colors.border);
					set('--success-color', t.colors.success);
				}
				if (t.shape) {
					set('--radius-sm', t.shape.radiusSm);
					set('--radius-md', t.shape.radiusMd);
					set('--radius-lg', t.shape.radiusLg);
					set('--border-width', t.shape.borderWidth);
					set('--shadow-button', t.shape.shadowButton);
				}
				if (t.motion) {
					set('--duration-fast', t.motion.durationFast);
					set('--duration-base', t.motion.durationBase);
					set('--easing', t.motion.easing);
				}
			} catch (e) {
				// ignore; defaults apply
			}
		})();
	</script>
	<link rel="preconnect" href="https://github.com" />
	<link rel="preconnect" href="https://cli.github.com" />
	<link rel="alternate" hreflang="en-au" href="https://pdoom1.com/" />


	<link rel="stylesheet" href="/assets/css/game-integration.css">
	<link rel="stylesheet" href="/assets/css/ui-enhancements.css">
	<link rel="stylesheet" href="/css/site.css">
</head>
<body>
	<a href="#main-content" class="skip-link">Skip to main content</a>
	<header>
		<nav role="navigation" aria-label="Main navigation">
			<div class="logo-container">
				<div class="designer-credit">Pip Foweraker's</div>
				<a href="#" class="logo" aria-label="p(Doom)1 home">p(Doom)1</a>
			</div>
			<ul class="nav-links" role="menubar">
				<li role="none"><a href="#home" role="menuitem">Game</a></li>
				<li role="none"><a href="/leaderboard/" role="menuitem">Leaderboard</a></li>
				<li role="none"><a href="/game-stats/" role="menuitem">Stats</a></li>
				<li role="none"><a href="/dashboard/" role="menuitem">Risk Dashboard</a></li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Community ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="#known-issues" role="menuitem">Known Issues</a></li>
						<li role="none"><a href="/blog/" role="menuitem">Dev Blog</a></li>
						<li role="none"><a href="/game-changelog/" role="menuitem">Updates</a></li>
						<li role="none"><a href="https://github.com/PipFoweraker/pdoom1" role="menuitem" target="_blank">GitHub</a></li>
					</ul>
				</li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Info ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="/about/" role="menuitem">About</a></li>
						<li role="none"><a href="/resources/" role="menuitem">AI Safety Resources</a></li>
						<li role="none"><a href="/docs/roadmap.md" role="menuitem">Roadmap</a></li>
						<li role="none"><a href="/docs/" role="menuitem">Documentation</a></li>
						<!-- <li role="none"><a href="/press/" role="menuitem">Press Kit</a></li> -->
					</ul>
				</li>
			</ul>
		</nav>
	</header>

	<!-- Breadcrumb Navigation -->
	<nav class="breadcrumb" aria-label="breadcrumb">
		<ol class="breadcrumb-list">
			<li class="breadcrumb-item current" aria-current="page">
				<span>Home</span>
			</li>
		</ol>
	</nav>

	<main role="main" id="main-content">
		<section class="hero" id="home" role="banner" aria-labelledby="main-heading">
			<h1 id="main-heading">p(Doom)1</h1>
			<p class="subtitle">A satirical meta-strategy game about AI Safety</p>
			<p style="margin-bottom: 1rem; color: var(--text-secondary);">
				<span class="status-indicator status-active"></span>
				Currently in Development - Alpha Release Available
			</p>
			
			<!-- Steam Badge - Primary Download CTA -->
			<div style="text-align: center; margin-top: 1.5rem;">
				<a href="https://store.steampowered.com/app/XXXXX/pdoom1" target="_blank" rel="noopener" style="text-decoration: none;">
					<div style="display: inline-block; padding: 12px 24px; background: #171a21; border: 1px solid #2a475e; border-radius: 4px; color: #ffffff; font-family: 'Motiva Sans', Arial, sans-serif; font-size: 14px; transition: all 0.2s ease; cursor: pointer;">
						<div style="display: flex; align-items: center; gap: 8px;">
							<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
								<path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm4.64 13.36L12 11.72v-4.1c0-.55-.45-1-1-1s-1 .45-1 1v4.72l-2.64 1.64c-.18.11-.29.3-.29.51 0 .55.45 1 1 1 .21 0 .4-.11.51-.29L10 13.36l1.42.86c.11.18.3.29.51.29.55 0 1-.45 1-1 0-.21-.11-.4-.29-.51z"/>
							</svg>
							<span>Available on Steam</span>
						</div>
					</div>
				</a>
				<div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 0.3rem; text-align: center;">
					©2025 Valve Corporation. Steam and the Steam logo are trademarks and/or registered trademarks of Valve Corporation in the U.S. and/or other countries.
				</div>
			</div>
			
			<!-- Fallback Download Options -->
			<div class="download-ctas" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 1.5rem;">
				<a href="https://github.com/PipFoweraker/pdoom1/releases" class="cta-button" style="background: var(--accent-secondary); border-color: var(--accent-secondary);" target="_blank" rel="noopener"><span class="loading-placeholder">Loading...</span>
				</a>
			</div>
		</section>

		<section class="stats" role="complementary" aria-label="Game statistics">
			<a href="/game-stats/" class="stat-link" role="img" aria-label="This week's baseline doom percentage - click for detailed statistics">
				<div class="stat">
					<span class="stat-number loading-number" aria-hidden="true">--</span>
					<span class="stat-label">Baseline Doom</span>
				</div>
			</a>
			<a href="/game-stats/" class="stat-link" role="img" aria-label="Number of frontier labs - click for detailed statistics">
				<div class="stat">
					<span class="stat-number loading-number" aria-hidden="true">--</span>
					<span class="stat-label">Frontier Labs</span>
				</div>
			</a>
			<a href="/game-stats/" class="stat-link" role="img" aria-label="Strategic possibilities in the game - click for detailed statistics">
				<div class="stat">
					<span class="stat-number loading-number" aria-hidden="true">--</span>
					<span class="stat-label">Strategic Possibilities</span>
				</div>
			</a>
		</section>
		
		<div style="text-align: center; margin: 1rem 0;">
			<a href="/game-stats/" class="cta-button" style="display: inline-block; font-size: 0.9rem; padding: 0.75rem 1.5rem;">
				📊 View Detailed Game Statistics →
			</a>
		</div>
		<!-- Live Status Section -->
		<section class="section" style="background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(0, 255, 65, 0.05) 100%); border-left: 4px solid var(--accent-primary);">
			<h2 style="color: var(--accent-primary); display: flex; align-items: center; gap: 0.5rem;">
				<span class="status-indicator status-active" style="animation: pulse 2s infinite;"></span>
				Live Game Status
			</h2>
			<div class="grid" style="margin-top: 1.5rem;">
				<div class="card">
					<h3 style="font-size: 1rem; color: var(--text-secondary);">Current Version</h3>
					<p style="font-size: 1.8rem; font-weight: bold; color: var(--accent-primary); margin: 0.5rem 0;">
						<span id="current-version-display" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">
						Released: <span id="release-date" class="loading-placeholder">...</span>
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted);">
						<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" style="color: var(--accent-secondary); text-decoration: none;">
							<span id="open-issues-count" class="loading-placeholder">--</span> open issues
						</a>
					</p>
				</div>
				<div class="card">
					<h3 style="font-size: 1rem; color: var(--text-secondary);">Weekly League</h3>
					<p style="font-size: 1.8rem; font-weight: bold; color: var(--accent-primary); margin: 0.5rem 0;">
						<span id="current-week-display" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">
						<span id="week-time-remaining" class="loading-placeholder">...</span>
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted);">
						<a href="/leaderboard/" style="color: var(--accent-secondary); text-decoration: none;">
							<span id="league-participants" class="loading-placeholder">--</span> participants →
						</a>
					</p>
				</div>
				<div class="card">
					<h3 style="font-size: 1rem; color: var(--text-secondary);">Last Updated</h3>
					<p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-primary); margin: 0.5rem 0;">
						<span id="last-update-time" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">
						Data syncs automatically every 6 hours
					</p>
					<p style="font-size: 0.85rem; color: var(--text-muted);">
						<a href="/monitoring/" style="color: var(--accent-secondary); text-decoration: none;">
							View system status →
						</a>
					</p>
				</div>
			</div>
		</section>



		<section class="section" id="about">
			<h2>About the Game</h2>
			<p>p(Doom)1 is a satirical meta-strategy game inspired by Papers Please, Pandemic, and clicker games. Navigate the complex world of AI safety research while managing resources, competing with other AI labs, and trying to prevent catastrophic outcomes.</p>
			
			<!-- Game Screenshots -->
			<div style="text-align: center; margin: 2rem 0;">
				<img src="assets/screenshot-placeholder-main.svg" alt="p(Doom)1 Main Game Interface" style="max-width: 100%; height: auto; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
			</div>
            
			<div class="grid">
				<div class="card">
					<h3>Resource Management</h3>
					<p>Balance money, staff, reputation, and p(Doom) levels as you make critical decisions about AI development.</p>
					<img src="assets/screenshot-placeholder-gameplay.svg" alt="Resource Management Interface" style="width: 100%; margin-top: 1rem; border-radius: var(--radius-sm);">
				</div>
				<div class="card">
					<h3>Research & Development</h3>
					<p>Publish papers, buy compute resources, and advance AI safety research while racing against competitors.</p>
					<img src="assets/screenshot-placeholder-ui.svg" alt="Research Interface" style="width: 100%; margin-top: 1rem; border-radius: var(--radius-sm);">
				</div>
				<div class="card">
					<h3>Dynamic Events</h3>
					<p>Handle unexpected challenges with our sophisticated event system featuring popup events, deferrals, and strategic timing.</p>
					<div style="margin-top: 1rem; padding: 1rem; background: var(--bg-primary); border-radius: var(--radius-sm); border: 1px dashed var(--accent-secondary);">
						<small style="color: var(--text-muted);">Event system screenshot coming soon...</small>
					</div>
				</div>
			</div>
		</section>

		<section class="section" id="download">
			<h2>Download & Get Started</h2>
			<p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
				Get p(Doom)1 and start playing immediately. Free and open source.
			</p>
			
			<!-- Download Options -->
			<div class="grid" style="margin-bottom: 3rem;">
				<div class="card" style="text-align: center; border: 2px solid var(--accent-primary);">
					<h3 style="color: var(--accent-primary);">Quick Start (Recommended)</h3>
					<p style="margin: 1rem 0;">Get the game on Steam</p>
					<a href="https://store.steampowered.com/app/XXXXX/pdoom1" class="cta-button" target="_blank" rel="noopener" style="margin-bottom: 1rem; display: inline-block;">
						Get on Steam
					</a>
					<p style="font-size: 0.9rem; color: var(--text-muted);">Windows, macOS, Linux</p>
				</div>
				
				<div class="card" style="text-align: center;">
					<h3 style="color: var(--accent-secondary);">Alternative Download</h3>
					<p style="margin: 1rem 0;">Download directly from GitHub</p>
					<a href="https://github.com/PipFoweraker/pdoom1/releases" class="cta-button" target="_blank" rel="noopener" style="background: var(--accent-secondary); border-color: var(--accent-secondary); margin-bottom: 1rem; display: inline-block;"><span class="loading-placeholder download-btn-secondary">Loading...</span>
					</a>
					<p style="font-size: 0.9rem; color: var(--text-muted);">Fallback option</p>
				</div>
			</div>

			<!-- System Requirements & Installation -->
			<div class="grid">
				<div class="card">
					<h3>System Requirements</h3>
					<div style="margin-top: 1rem;">
						<p><strong>Minimum:</strong></p>
						<ul style="color: var(--text-secondary); margin: 0.5rem 0 1rem 1.5rem;">
							<li>Python 3.8+ (for source builds)</li>
							<li>pygame library</li>
							<li>~50MB disk space</li>
							<li>Basic graphics support</li>
						</ul>
						<p><strong>Supported Platforms:</strong></p>
						<div style="display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap;">
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">Windows</span>
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">macOS</span>
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">Linux</span>
						</div>
					</div>
				</div>
				
				<div class="card">
					<h3>Quick Installation</h3>
					<p style="margin-bottom: 1rem; color: var(--text-secondary);">For source builds:</p>
<pre style="background: var(--bg-primary); padding: 1rem; border-radius: var(--radius-sm, 4px); overflow-x: auto; color: var(--accent-primary); font-size: 0.9rem; line-height: 1.4;">git clone https://github.com/PipFoweraker/pdoom1.git
cd pdoom1
pip install -r requirements.txt
python main.py</pre>
					<p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted);">
						Or download the pre-built executable for instant play!
					</p>
				</div>
			</div>
			
			<!-- Additional Resources -->
			<div style="text-align: center; margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
				<h3 style="color: var(--accent-primary); margin-bottom: 1rem;">Need Help?</h3>
				<p style="color: var(--text-secondary); margin-bottom: 2rem;">Check out our documentation and community resources</p>
				<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
					<a href="/docs/" style="color: var(--accent-primary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--accent-primary); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">Documentation</a>
					<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" style="color: var(--accent-secondary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--accent-secondary); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">[Bug] Report Issues</a>
					<a href="/game-changelog/" style="color: var(--text-secondary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">Changelog</a>
				</div>
			</div>
		</section>

		<section class="section" id="roadmap">
			<h2>Roadmap</h2>
			<p>High-level milestones for the website and game distribution. Full details live in <a href="/docs/roadmap.md" style="color: var(--accent-primary);">docs/roadmap.md</a>. Also see <a href="/docs/pdoom1-open-issues.md" style="color: var(--accent-primary);">Open issues from the main repo</a> for day-to-day tasks.</p>
			<div class="grid">
				<a href="/docs/roadmap.md" class="card roadmap-card" style="text-decoration: none; color: inherit;">
					<h3>Short term (weeks) 📅</h3>
					<ul>
						<li>Alpha updates 2-3x weekly via Dev Blog</li>
						<li>Automated posts to Discord, Bluesky, X, LinkedIn</li>
						<li>Bug intake via GitHub Issues (Netlify function)</li>
					</ul>
					<div style="margin-top: 1rem; font-size: 0.8rem; color: var(--accent-primary);">
						Click for detailed roadmap →
					</div>
				</a>
				<a href="/docs/roadmap.md" class="card roadmap-card" style="text-decoration: none; color: inherit;">
					<h3>Mid term (months) 🚀</h3>
					<ul>
						<li>Steam release preparation</li>
						<li>Design tokens synced from main repo style guide</li>
						<li>Content pipeline from Airtable finalized</li>
					</ul>
					<div style="margin-top: 1rem; font-size: 0.8rem; color: var(--accent-primary);">
						Click for detailed roadmap →
					</div>
				</a>
			</div>
		</section>

		<section class="section" id="known-issues">
			<h2>Known Issues & Development Status</h2>
			<p>Live updates from our development repository. See what we're working on and known issues before downloading.</p>
			
			<div id="github-issues-container">
				<div id="issues-loading" class="card" style="text-align: center; padding: 2rem;">
					<div style="color: var(--text-muted);">
						<div style="margin-bottom: 1rem;">Loading issues from GitHub...</div>
						<div class="progress-bar" style="margin: 16px auto; max-width: 200px;">
							<div class="fill" style="width: 100%;"></div>
						</div>
						<div style="font-size: 0.9rem;">Connecting to development repository</div>
					</div>
				</div>
				
				<div id="issues-error" class="error-boundary" style="display: none;">
					<h3>Connection Failed</h3>
					<p>Unable to connect to GitHub API. This might be due to:</p>
					<ul style="margin: 8px 0; padding-left: 20px;">
						<li>Temporary GitHub API limits</li>
						<li>Network connectivity issues</li>
						<li>High traffic periods</li>
					</ul>
					<p>You can still view issues directly on GitHub:</p>
					<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" class="game-button">
						View on GitHub →
					</a>
					<button onclick="retryLoadIssues()" class="retry-button">
						Retry Loading
					</button>
				</div>
				
				<div id="issues-content" style="display: none;">
					<div class="grid" id="issues-grid">
						<!-- Issues will be populated here -->
					</div>
					
					<div style="text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
						<div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
							<span id="issues-count">0</span> open issues - 
							Last updated: <span id="issues-timestamp">-</span>
						</div>
						<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
							<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" class="cta-button" style="background: var(--accent-secondary); border-color: var(--accent-secondary);">
								View All Issues on GitHub
							</a>
							<button id="refresh-issues" class="cta-button" style="background: var(--bg-tertiary); color: var(--text-primary); border-color: var(--border-color);">
								Refresh
							</button>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- AI Safety Resources - Now on dedicated page -->
		<section class="section" style="text-align: center; padding: 2rem;">
			<h2>AI Safety Resources</h2>
			<p style="color: var(--text-secondary); margin-bottom: 2rem;">
				Explore the broader AI Safety ecosystem that inspires p(Doom)1.
			</p>
			<a href="/resources/" class="cta-button" style="display: inline-block;">
				Browse AI Safety Resources →
			</a>
		</section>

		<section class="section" id="faq" role="region" aria-labelledby="faq-heading">
			<h2 id="faq-heading">Frequently Asked Questions</h2>
			<div class="faq-grid" style="display: grid; gap: 2rem; margin-top: 2rem;">
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">What is p(Doom)1?</summary>
					<p style="color: var(--text-secondary);">p(Doom)1 is a satirical strategy game about AI Safety. You manage competing AI labs, make policy decisions, and try to prevent catastrophic outcomes while balancing resources and public perception.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">Is the game free?</summary>
					<p style="color: var(--text-secondary);">Yes! p(Doom)1 is completely free and open source. You can download it from GitHub or wait for the Steam release.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">What platforms are supported?</summary>
					<p style="color: var(--text-secondary);">p(Doom)1 runs on Windows, macOS, and Linux. It's built with Python and Pygame for maximum compatibility.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">When is the Steam release?</summary>
					<p style="color: var(--text-secondary);">We're preparing for Steam release soon! Follow our development blog for updates on the Steam launch timeline.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">Can I contribute to development?</summary>
					<p style="color: var(--text-secondary);">Absolutely! p(Doom)1 is open source. Check out our <a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">GitHub repository</a> to report issues, suggest features, or contribute code.</p>
				</details>
			</div>
		</section>

		<section class="section" id="support" role="region" aria-labelledby="support-heading">
			<h2 id="support-heading">Support & Bug Reports</h2>
			<p>Found a bug or need help? Report issues directly through our GitHub integration.</p>
			<p style="margin-top: 1rem;">
				<a href="/bug-report/" class="cta-button" style="display: inline-block; text-decoration: none;">
					Report a Bug →
				</a>
			</p>
			<p style="margin-top: 1rem; color: var(--text-muted);">
				You can also view <a href="https://github.com/PipFoweraker/pdoom1/issues" style="color: var(--accent-primary);">existing issues on GitHub</a>.
			</p>
		</section>

		<section class="section" id="contact">
			<h2>Stay Connected</h2>
			<div class="grid">
				<div class="card">
					<h3>[Link] GitHub</h3>
					<p>Access source code, report issues, and contribute to development.</p>
					<a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">View Repository --&gt;</a>
				</div>
				<div class="card">
					<h3>[Mail] Newsletter</h3>
					<p>Get updates on new releases and development progress.</p>
					<form class="newsletter-form" id="newsletter-form">
						<input type="email" name="email" placeholder="Enter your email" aria-label="Email address for newsletter subscription" class="newsletter-input" required>
						<button type="submit" class="cta-button" style="width: 100%; padding: 0.5rem;">Subscribe</button>
					</form>
				</div>
				<div class="card">
					<h3>Email</h3>
					<p>Prefer email? Reach us directly:</p>
					<p style="margin-top: 1rem;"><a id="contact-email-link" href="#" style="color: var(--accent-primary);">team@pdoom1.com</a></p>
				</div>
			</div>
		</section>
	</main>

	<!-- Quick Actions Menu -->
	<div class="quick-actions" id="quick-actions">
		<button class="quick-actions-toggle" id="quick-actions-toggle" aria-label="Quick Actions Menu" title="Quick Actions (Press Q)">
			⚡
		</button>
		<div class="quick-actions-menu" id="quick-actions-menu">
			<a href="#overview" class="quick-action" title="Jump to Overview">📋</a>
			<a href="#features" class="quick-action" title="View Features">⭐</a>
			<a href="/game-stats/" class="quick-action" title="Game Statistics">📊</a>
			<a href="/blog/" class="quick-action" title="Developer Blog">📝</a>
			<a href="#roadmap" class="quick-action" title="Development Roadmap">🗺️</a>
			<a href="#contact" class="quick-action" title="Contact Us">✉️</a>
		</div>
	</div>

	<footer>
		<div class="footer-content">
			<div class="footer-section">
				<h3>Game</h3>
				<ul class="footer-links">
					<li><a href="#overview">Overview</a></li>
					<li><a href="#features">Features</a></li>
					<li><a href="/game-stats/">Statistics</a></li>
					<li><a href="/game-changelog/">Releases</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Resources</h3>
				<ul class="footer-links">
					<li><a href="/blog/">Developer Blog</a></li>
					<li><a href="/docs/">Documentation</a></li>
					<li><a href="/website-changelog/">Site Updates</a></li>
					<li><a href="#contact">Contact</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Community</h3>
				<ul class="footer-links">
					<li><a href="#" target="_blank" rel="noopener">GitHub</a></li>
					<li><a href="#" target="_blank" rel="noopener">Discord</a></li>
					<li><a href="#" target="_blank" rel="noopener">YouTube</a></li>
					<li><a href="#roadmap">Roadmap</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Status</h3>
				<div class="footer-status">
					<p>
						<span class="status-indicator status-active"></span>
						Game: Active Development
					</p>
					<p>
						<span class="status-indicator status-success"></span>
						Website: Live
					</p>
				</div>
			</div>
		</div>
		<div class="footer-bottom">
			<p>&copy; 2025 pdoom1. Not affiliated with any AI organization. For fun, education, and satire only.</p>
			<p class="footer-meta">
				Privacy: No personal data collected | 
				<span id="website-version">Version loading...</span>
			</p>
		</div>
	</footer>

	<script>
		// Dropdown menu functionality with keyboard navigation
		document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
			toggle.addEventListener('click', function(e) {
				e.preventDefault();
				const dropdown = this.closest('.dropdown');
				const isExpanded = this.getAttribute('aria-expanded') === 'true';
				
				// Close all other dropdowns
				document.querySelectorAll('.dropdown-toggle').forEach(other => {
					other.setAttribute('aria-expanded', 'false');
				});
				
				// Toggle current dropdown
				this.setAttribute('aria-expanded', !isExpanded);
				
				// Focus first menu item when opening
				if (!isExpanded) {
					const firstMenuItem = dropdown.querySelector('.dropdown-menu a');
					if (firstMenuItem) {
						setTimeout(() => firstMenuItem.focus(), 100);
					}
				}
			});

			// Keyboard navigation for dropdown toggles
			toggle.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				
				if (e.key === 'Enter' || e.key === ' ') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'ArrowDown') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'Escape') {
					this.setAttribute('aria-expanded', 'false');
					this.focus();
				}
			});
		});

		// Keyboard navigation for dropdown menu items
		document.querySelectorAll('.dropdown-menu a').forEach((menuItem, index, menuItems) => {
			menuItem.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				const toggle = dropdown.querySelector('.dropdown-toggle');
				
				if (e.key === 'ArrowDown') {
					e.preventDefault();
					const nextIndex = (index + 1) % menuItems.length;
					const nextItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[nextIndex % dropdown.querySelectorAll('.dropdown-menu a').length];
					if (nextItem) nextItem.focus();
				} else if (e.key === 'ArrowUp') {
					e.preventDefault();
					const prevIndex = index === 0 ? dropdown.querySelectorAll('.dropdown-menu a').length - 1 : index - 1;
					const prevItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[prevIndex];
					if (prevItem) prevItem.focus();
				} else if (e.key === 'Escape') {
					e.preventDefault();
					toggle.setAttribute('aria-expanded', 'false');
					toggle.focus();
				} else if (e.key === 'Tab') {
					// Allow natural tab behavior, but close dropdown
					toggle.setAttribute('aria-expanded', 'false');
				}
			});
		});

		// Close dropdowns when clicking outside
		document.addEventListener('click', function(e) {
			if (!e.target.closest('.dropdown')) {
				document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
					toggle.setAttribute('aria-expanded', 'false');
				});
			}
		});

		// Smooth scrolling for navigation links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});

		// Enhanced statistics animation on scroll
		const observerOptions = {
			threshold: 0.5,
			rootMargin: '0px 0px -100px 0px'
		};

		const animateStats = (entries, observer) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.style.opacity = '1';
					entry.target.style.transform = 'translateY(0)';
				}
			});
		};

		if (window.IntersectionObserver) {
			const statsObserver = new IntersectionObserver(animateStats, observerOptions);
			document.querySelectorAll('.stat').forEach(stat => {
				stat.style.opacity = '0';
				stat.style.transform = 'translateY(20px)';
				stat.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
				statsObserver.observe(stat);
			});
		}

		// Form validation helpers
		function showError(fieldId, message) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'true');
			errorDiv.textContent = message;
			errorDiv.classList.add('visible');
		}
		
		function clearError(fieldId) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'false');
			errorDiv.textContent = '';
			errorDiv.classList.remove('visible');
		}
		
		function updateStatus(message, isError = false) {
			const statusDiv = document.getElementById('submit-status');
			statusDiv.textContent = message;
			statusDiv.style.color = isError ? 'var(--accent-danger)' : 'var(--success-color)';
		}

		// Newsletter form
		document.getElementById('newsletter-form').addEventListener('submit', function(e) {
			e.preventDefault();
			const input = e.target.querySelector('input[type="email"]');
			const email = (window.__PDOOM_CONFIG__ && window.__PDOOM_CONFIG__.contactEmail) || 'team@pdoom1.com';
			const subject = encodeURIComponent('Subscribe: pdoom1 newsletter');
			const body = encodeURIComponent(`Please subscribe this address: ${input?.value || ''}`);
			window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
		});
        
		// Smooth scrolling for nav links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});
		
		// GitHub Issues Integration
		class GitHubIssuesLoader {
			constructor() {
				this.apiUrl = 'https://api.github.com/repos/PipFoweraker/pdoom1/issues';
				this.cache = null;
				this.cacheExpiry = 5 * 60 * 1000; // 5 minutes
				this.lastFetch = 0;
			}
			
			async fetchIssues() {
				const now = Date.now();
				
				// Return cached data if still fresh
				if (this.cache && (now - this.lastFetch < this.cacheExpiry)) {
					return this.cache;
				}
				
				try {
					const response = await fetch(this.apiUrl + '?state=open&per_page=10&sort=updated', {
						headers: {
							'Accept': 'application/vnd.github.v3+json'
						}
					});
					
					if (!response.ok) {
						throw new Error(`GitHub API error: ${response.status}`);
					}
					
					const issues = await response.json();
					this.cache = issues;
					this.lastFetch = now;
					
					return issues;
				} catch (error) {
					console.warn('Failed to fetch GitHub issues:', error);
					throw error;
				}
			}
			
			formatIssueCard(issue) {
				const labels = issue.labels.map(label => 
					`<span class="issue-label" style="background: #${label.color}; color: ${this.getContrastColor(label.color)}; padding: 2px 6px; border-radius: 3px; font-size: 0.75rem; margin-right: 4px;">${label.name}</span>`
				).join('');
				
				const updatedDate = new Date(issue.updated_at).toLocaleDateString();
				const isPriority = issue.labels.some(l => l.name.includes('priority-high') || l.name.includes('critical'));
				const isBug = issue.labels.some(l => l.name === 'bug');
				
				const icon = isBug ? '[BUG]' : isPriority ? '[!]' : '[FEAT]';
				const cardClass = isPriority ? 'priority-issue' : '';
				
				return `
					<div class="card issue-card ${cardClass}" style="position: relative;">
						<div style="display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 1rem;">
							<span style="font-size: 1.2rem;">${icon}</span>
							<div style="flex: 1; min-width: 0;">
								<h4 style="margin: 0 0 0.5rem 0; font-size: 1rem; line-height: 1.3;">
									<a href="${issue.html_url}" target="_blank" rel="noopener" style="color: var(--text-primary); text-decoration: none;">
										${this.escapeHtml(issue.title)}
									</a>
								</h4>
								<div style="margin-bottom: 0.5rem;">
									${labels}
								</div>
								<div style="color: var(--text-muted); font-size: 0.8rem;">
									#${issue.number} - Updated ${updatedDate}
								</div>
							</div>
						</div>
						${isPriority ? '<div style="position: absolute; top: 8px; right: 8px; background: var(--accent-danger); color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; font-weight: bold;">HIGH PRIORITY</div>' : ''}
					</div>
				`;
			}
			
			escapeHtml(text) {
				const div = document.createElement('div');
				div.textContent = text;
				return div.innerHTML;
			}
			
			getContrastColor(hexColor) {
				// Convert hex to RGB
				const r = parseInt(hexColor.substr(0, 2), 16);
				const g = parseInt(hexColor.substr(2, 2), 16);
				const b = parseInt(hexColor.substr(4, 2), 16);
				
				// Calculate luminance
				const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
				
				return luminance > 0.5 ? '#000000' : '#ffffff';
			}
			
			async renderIssues() {
				const loadingEl = document.getElementById('issues-loading');
				const errorEl = document.getElementById('issues-error');
				const contentEl = document.getElementById('issues-content');
				const gridEl = document.getElementById('issues-grid');
				const countEl = document.getElementById('issues-count');
				const timestampEl = document.getElementById('issues-timestamp');
				
				// Show loading state
				loadingEl.style.display = 'block';
				errorEl.style.display = 'none';
				contentEl.style.display = 'none';
				
				try {
					const issues = await this.fetchIssues();
					
					// Hide loading, show content
					loadingEl.style.display = 'none';
					contentEl.style.display = 'block';
					
					// Populate issues grid
					if (issues.length === 0) {
						gridEl.innerHTML = `
							<div class="card" style="text-align: center; padding: 2rem; grid-column: 1 / -1;">
								<div style="color: var(--success-color); margin-bottom: 1rem;">[OK] No open issues!</div>
								<div style="color: var(--text-muted);">Everything is working smoothly</div>
							</div>
						`;
					} else {
						gridEl.innerHTML = issues.map(issue => this.formatIssueCard(issue)).join('');
					}
					
					// Update metadata
					countEl.textContent = issues.length;
					timestampEl.textContent = new Date().toLocaleTimeString();
					
				} catch (error) {
					// Try to show fallback data from static issues
					try {
						const fallbackIssues = await this.getFallbackIssues();
						if (fallbackIssues && fallbackIssues.length > 0) {
							loadingEl.style.display = 'none';
							contentEl.style.display = 'block';
							
							gridEl.innerHTML = fallbackIssues.map(issue => this.formatIssueCard(issue)).join('') + `
								<div class="card" style="text-align: center; padding: 1rem; grid-column: 1 / -1; background: var(--bg-tertiary); border: 1px solid var(--accent-secondary);">
									<div style="color: var(--accent-secondary); font-size: 0.9rem;">
										[WARNING] Showing cached issues - Live data temporarily unavailable
									</div>
								</div>
							`;
							
							countEl.textContent = fallbackIssues.length + ' (cached)';
							timestampEl.textContent = 'Cached data';
						} else {
							throw error; // Fall through to error state
						}
					} catch (fallbackError) {
						// Show error state
						loadingEl.style.display = 'none';
						errorEl.style.display = 'block';
						contentEl.style.display = 'none';
					}
				}
			}
			
			async getFallbackIssues() {
				// Try to fetch from static markdown file as fallback
				try {
					const response = await fetch('/docs/pdoom1-open-issues.md');
					if (response.ok) {
						const markdown = await response.text();
						return this.parseMarkdownIssues(markdown);
					}
				} catch (e) {
					// Fallback to hardcoded recent issues
					return [
						{
							number: 245,
							title: 'Post-Rebase Test Failures: 5 Functional Issues Requiring Investigation',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/245',
							updated_at: '2025-09-09T06:16:52Z',
							labels: [{ name: 'bug', color: 'd73a4a' }]
						},
						{
							number: 240,
							title: 'UI Interaction Issues: Button clicks and spacebar not working consistently',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/240',
							updated_at: '2025-09-07T22:05:21Z',
							labels: [{ name: 'bug', color: 'd73a4a' }, { name: 'ui-ux', color: '7057ff' }]
						},
						{
							number: 232,
							title: 'Drop Python 3.8 Support Initiative',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/232',
							updated_at: '2025-09-04T23:27:29Z',
							labels: [
								{ name: 'enhancement', color: 'a2eeef' },
								{ name: 'priority-high', color: 'b60205' },
								{ name: 'technical-debt', color: 'fef2c0' }
							]
						}
					];
				}
				return [];
			}
			
			parseMarkdownIssues(markdown) {
				// Simple parser for the existing markdown format
				const lines = markdown.split('\n');
				const issues = [];
				
				for (const line of lines) {
					const match = line.match(/- \[#(\d+)\]\(([^)]+)\) (.+?) \| labels: ([^|]*) \| milestone: ([^|]*) \| updated: (.+)/);
					if (match) {
						const [, number, url, title, labelsStr, milestone, updated] = match;
						const labels = labelsStr.split(', ')
							.filter(l => l.trim())
							.map(name => ({ name: name.trim(), color: this.getLabelColor(name.trim()) }));
						
						issues.push({
							number: parseInt(number),
							title: title.trim(),
							html_url: url,
							updated_at: updated.trim(),
							labels: labels
						});
					}
				}
				
				return issues.slice(0, 10); // Limit to 10 issues
			}
			
			getLabelColor(labelName) {
				const colorMap = {
					'bug': 'd73a4a',
					'enhancement': 'a2eeef',
					'documentation': '0075ca',
					'priority-high': 'b60205',
					'priority-medium': 'fbca04',
					'technical-debt': 'fef2c0',
					'ui-ux': '7057ff',
					'audio': 'c2e0c6'
				};
				return colorMap[labelName] || '6f42c1'; // Default purple
			}
		}
		
		// Initialize GitHub issues loader
		const issuesLoader = new GitHubIssuesLoader();
		
		// Load issues when page loads
		document.addEventListener('DOMContentLoaded', () => {
			issuesLoader.renderIssues();
		});
		
		// Refresh button functionality
		document.addEventListener('DOMContentLoaded', () => {
			const refreshBtn = document.getElementById('refresh-issues');
			if (refreshBtn) {
				refreshBtn.addEventListener('click', async () => {
					const originalText = refreshBtn.textContent;
					refreshBtn.textContent = 'Refreshing...';
					refreshBtn.disabled = true;
					
					// Force cache refresh
					issuesLoader.cache = null;
					issuesLoader.lastFetch = 0;
					
					await issuesLoader.renderIssues();
					
					setTimeout(() => {
						refreshBtn.textContent = originalText;
						refreshBtn.disabled = false;
					}, 1000);
				});
			}
		});
		
		// Retry loading function for error boundary
		async function retryLoadIssues() {
			const errorEl = document.getElementById('issues-error');
			const loadingEl = document.getElementById('issues-loading');
			
			// Hide error, show loading
			if (errorEl) errorEl.style.display = 'none';
			if (loadingEl) loadingEl.style.display = 'block';
			
			// Clear cache and retry
			issuesLoader.cache = null;
			issuesLoader.lastFetch = 0;
			await issuesLoader.renderIssues();
		}
		
		// Load and update version information
		async function loadVersionInfo() {
			try {
				const response = await fetch('/data/version.json', { cache: 'no-store' });
				const versionData = await response.json();
				
				// Update stats with real data
				const stats = document.querySelectorAll('.stat');
				if (stats.length >= 3) {
					// Update baseline doom with stubbed value
					stats[0].querySelector('.stat-number').textContent = `${versionData.game_stats.baseline_doom_percent}%`;
					
					// Update frontier labs count  
					stats[1].querySelector('.stat-number').textContent = versionData.game_stats.frontier_labs_count;
					
					// Update strategic possibilities
					const possibilities = versionData.game_stats.strategic_possibilities;
					const formattedPossibilities = possibilities >= 1000 ? `${(possibilities/1000).toFixed(0)}k+` : possibilities;
					stats[2].querySelector('.stat-number').textContent = formattedPossibilities;
				}
				
				// Update version info in download buttons if needed
				const downloadButtons = document.querySelectorAll('a[href*="releases"]');
				downloadButtons.forEach(button => {
					if (button.textContent.includes('Download') && button.textContent.includes('Latest')) {
						button.textContent = `Download ${versionData.latest_release.version} (Latest)`;
						button.href = versionData.latest_release.html_url;
					}
				});
				
				console.log('Version info updated:', versionData.latest_release.version);
			} catch (error) {
				console.warn('Could not load version info:', error);
			}
		}
		
		// Load version info when page loads
		document.addEventListener('DOMContentLoaded', () => {
			loadVersionInfo();
		});
	</script>

	<script>
		// Quick Actions Menu functionality
		document.addEventListener('DOMContentLoaded', () => {
			const quickActions = document.getElementById('quick-actions');
			const toggle = document.getElementById('quick-actions-toggle');
			const menu = document.getElementById('quick-actions-menu');
			
			if (!quickActions || !toggle || !menu) return;
			
			let isMenuOpen = false;
			
			// Toggle menu
			const toggleMenu = () => {
				isMenuOpen = !isMenuOpen;
				quickActions.classList.toggle('active', isMenuOpen);
				toggle.setAttribute('aria-expanded', isMenuOpen);
			};
			
			// Close menu
			const closeMenu = () => {
				isMenuOpen = false;
				quickActions.classList.remove('active');
				toggle.setAttribute('aria-expanded', 'false');
			};
			
			// Event listeners
			toggle.addEventListener('click', toggleMenu);
			
			// Close when clicking outside
			document.addEventListener('click', (e) => {
				if (!quickActions.contains(e.target)) {
					closeMenu();
				}
			});
			
			// Keyboard shortcuts
			document.addEventListener('keydown', (e) => {
				// Q key to toggle quick actions
				if (e.key.toLowerCase() === 'q' && !e.ctrlKey && !e.metaKey && !e.altKey) {
					// Only if not typing in an input field
					if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) {
						e.preventDefault();
						toggleMenu();
					}
				}
				// Escape to close
				else if (e.key === 'Escape' && isMenuOpen) {
					closeMenu();
				}
				// Number keys for quick navigation (1-6)
				else if (e.key >= '1' && e.key <= '6' && isMenuOpen) {
					e.preventDefault();
					const actionIndex = parseInt(e.key) - 1;
					const actions = menu.querySelectorAll('.quick-action');
					if (actions[actionIndex]) {
						actions[actionIndex].click();
						closeMenu();
					}
				}
			});
			
			// Add keyboard hints to tooltips
			const actions = menu.querySelectorAll('.quick-action');
			actions.forEach((action, index) => {
				const originalTitle = action.getAttribute('title');
				action.setAttribute('title', `${originalTitle} (${index + 1})`);
			});
		});
		
		// Enhanced keyboard navigation
		document.addEventListener('keydown', (e) => {
			// Skip if typing in form fields
			if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) return;
			
			// Navigation shortcuts
			if (e.ctrlKey || e.metaKey) {
				switch (e.key.toLowerCase()) {
					case 'h':
						e.preventDefault();
						document.getElementById('home')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'f':
						e.preventDefault();
						document.getElementById('features')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'r':
						e.preventDefault();
						document.getElementById('roadmap')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'c':
						e.preventDefault();
						document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' });
						break;
				}
			}
		});
		
		// Add tooltips with keyboard shortcuts
		document.addEventListener('DOMContentLoaded', () => {
			// Add keyboard shortcut hints to navigation
			const navLinks = document.querySelectorAll('.nav-links a');
			navLinks.forEach(link => {
				const href = link.getAttribute('href');
				let shortcut = '';
				if (href === '#home' || href === '#overview') shortcut = ' (Ctrl+H)';
				else if (href === '#features') shortcut = ' (Ctrl+F)';
				else if (href === '#roadmap') shortcut = ' (Ctrl+R)';
				else if (href === '#contact') shortcut = ' (Ctrl+C)';
				
				if (shortcut) {
					const originalText = link.textContent;
					link.setAttribute('title', originalText + shortcut);
				}
			});
		});
	</script>
	
	<!-- Add CSS for GitHub Issues -->
	<style>
		.issue-card {
			transition: all var(--duration-base) var(--easing);
		}
		
		.issue-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 255, 65, 0.15);
		}
		
		.issue-card.priority-issue {
			border-left: 4px solid var(--accent-danger);
		}
		
		.issue-label {
			display: inline-block;
			white-space: nowrap;
		}
		
		#github-issues-container {
			margin-top: 2rem;
		}
		
		@media (max-width: 768px) {
			.issue-card h4 {
				font-size: 0.9rem;
			}
			
			.issue-label {
				font-size: 0.7rem !important;
				padding: 1px 4px !important;
			}
		}
	</style>
	
	<!-- Privacy-preserving analytics -->
	<script src="/assets/js/analytics.js"></script>
</body>
</html>
