<!DOCTYPE html>
<html lang="en-AU">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>p(Doom)1 - AI Safety Strategy Game</title>
	<link rel="canonical" href="https://pdoom1.com/" />
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" />
	<meta name="description" content="p(Doom)1 is a satirical meta-strategy game about AI Safety. Manage labs, policy, and p(doom) while avoiding catastrophic outcomes." />
	<meta name="author" content="p(Doom)1" />
	<meta property="og:type" content="website" />
	<meta property="og:site_name" content="p(Doom)1" />
	<meta property="og:title" content="p(Doom)1 - AI Safety Strategy Game" />
	<meta property="og:description" content="A satirical meta-strategy game about AI Safety." />
	<meta property="og:url" content="https://pdoom1.com/" />
	<meta property="og:image" content="https://pdoom1.com/assets/pdoom_logo_1.png" />
	<meta name="twitter:card" content="summary_large_image" />
	<!-- twitter:site intentionally omitted until handle is finalized (must be ASCII, suggest @pdoom1) -->
	<style>
		:root {
			/* Color scheme inspired by typical pygame/terminal aesthetics */
			--bg-primary: #1a1a1a;
			--bg-secondary: #2d2d2d;
			--bg-tertiary: #3d3d3d;
			--text-primary: #ffffff;
			--text-secondary: #cccccc;
			--text-muted: #888888;
			--accent-primary: #00ff41;  /* Matrix green */
			--accent-secondary: #ff6b35; /* Warning orange */
			--accent-danger: #ff4444;   /* Error red */
			--border-color: #444444;
			--success-color: #4caf50;

			/* Tokens that may be injected from /design/tokens.json */
			--radius-sm: 4px;
			--radius-md: 6px;
			--radius-lg: 10px;
			--border-width: 1px;
			--shadow-button: 0 10px 20px rgba(0, 255, 65, 0.3);
			--duration-fast: 150ms;
			--duration-base: 300ms;
			--easing: cubic-bezier(0.2, 0.8, 0.2, 1);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Courier New', monospace;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			background-image: 
				radial-gradient(circle at 25% 25%, rgba(0, 255, 65, 0.02) 0%, transparent 50%),
				radial-gradient(circle at 75% 75%, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
		}

		header {
			background: var(--bg-secondary);
			border-bottom: 2px solid var(--accent-primary);
			padding: 0.8rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		nav {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 2rem;
		}

		.logo-container {
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: 0.5rem;
		}

		.designer-credit {
			font-size: 0.85rem;
			color: var(--text-muted);
			font-weight: normal;
			letter-spacing: 0.5px;
		}

		.logo {
			font-size: 1.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			text-decoration: none;
			text-shadow: 0 0 10px var(--accent-primary);
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			list-style: none;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			transition: color var(--duration-base) var(--easing);
			padding: 0.5rem 1rem;
			border: 1px solid transparent;
			font-size: 1.1rem;
			font-weight: 600;
		}

		.nav-links a:hover {
			color: var(--accent-primary);
			border-color: var(--accent-primary);
		}

		/* Dropdown Navigation */
		.dropdown {
			position: relative;
		}

		.dropdown-toggle {
			cursor: pointer;
		}

		.dropdown-menu {
			position: absolute;
			top: 100%;
			right: 0;
			background: var(--bg-secondary);
			border: 1px solid var(--border-color);
			border-radius: var(--radius-md);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all var(--duration-base) var(--easing);
			min-width: 150px;
			z-index: 1000;
			list-style: none;
			padding: 0.5rem 0;
			margin: 0;
		}

		.dropdown:hover .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.dropdown-menu li {
			margin: 0;
		}

		.dropdown-menu a {
			display: block;
			padding: 0.5rem 1rem;
			color: var(--text-secondary);
			text-decoration: none;
			border: none;
			transition: all var(--duration-fast) ease;
		}

		.dropdown-menu a:hover {
			background: var(--bg-tertiary);
			color: var(--accent-primary);
			border-radius: 0;
		}

		main {
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
		}

		.hero {
			text-align: center;
			padding: 2.5rem 0;
			background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
			border-radius: var(--radius-lg, 10px);
			margin-bottom: 3rem;
			border: var(--border-width, 1px) solid var(--border-color);
		}

		.hero h1 {
			font-size: 3rem;
			margin-bottom: 1rem;
			color: var(--accent-primary);
			text-shadow: 0 0 20px var(--accent-primary);
		}

		.hero .subtitle {
			font-size: 1.2rem;
			color: var(--text-secondary);
			margin-bottom: 2rem;
		}

		.cta-button {
			display: inline-block;
			background: linear-gradient(45deg, var(--accent-primary), var(--success-color));
			color: var(--bg-primary);
			padding: 1rem 2rem;
			text-decoration: none;
			border-radius: var(--radius-md, 6px);
			font-weight: bold;
			transition: transform var(--duration-base) var(--easing), box-shadow var(--duration-base) var(--easing);
			border: none;
			cursor: pointer;
			font-family: inherit;
			font-size: 1rem;
		}

		.cta-button:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-button, 0 10px 20px rgba(0, 255, 65, 0.3));
		}

		.section {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 2rem;
			margin-bottom: 2rem;
		}

		.section h2 {
			color: var(--accent-secondary);
			margin-bottom: 1rem;
			font-size: 1.8rem;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 2rem;
			margin-top: 2rem;
		}

		.card {
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 1.5rem;
			transition: transform var(--duration-base) var(--easing), border-color var(--duration-base) var(--easing);
		}

		.card:hover {
			transform: translateY(-5px);
			border-color: var(--accent-primary);
		}

		.card h3 {
			color: var(--accent-primary);
			margin-bottom: 1rem;
		}

		.stats {
			display: flex;
			justify-content: space-around;
			text-align: center;
			padding: 2rem 0;
		}

		.stat {
			flex: 1;
		}

		.stat-number {
			font-size: 2.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			display: block;
		}

		.stat-label {
			color: var(--text-muted);
			font-size: 0.9rem;
		}

		.form-container {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 2rem;
			max-width: 600px;
			margin: 2rem auto;
		}

		.form-group {
			margin-bottom: 1.5rem;
		}

		label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
		}

		input, textarea, select {
			width: 100%;
			padding: 0.8rem;
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-sm, 4px);
			color: var(--text-primary);
			font-family: inherit;
		}

		input:focus, textarea:focus, select:focus {
			outline: none;
			border-color: var(--accent-primary);
			box-shadow: 0 0 0 2px rgba(0, 255, 65, 0.2);
		}

		.form-help {
			font-size: 0.85rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		.error-message {
			font-size: 0.85rem;
			color: var(--accent-danger);
			margin-top: 0.25rem;
			display: none;
		}

		.error-message.visible {
			display: block;
		}

		input[aria-invalid="true"], 
		textarea[aria-invalid="true"], 
		select[aria-invalid="true"] {
			border-color: var(--accent-danger);
			box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.2);
		}

		/* FAQ Section Styling */
		.faq-item summary {
			list-style: none;
			position: relative;
			padding-right: 2rem;
		}

		.faq-item summary::-webkit-details-marker {
			display: none;
		}

		.faq-item summary::after {
			content: '+';
			position: absolute;
			right: 0;
			top: 0;
			font-size: 1.2rem;
			color: var(--accent-primary);
			transition: transform var(--duration-base) var(--easing);
		}

		.faq-item[open] summary::after {
			transform: rotate(45deg);
		}

		.faq-item[open] {
			border-color: var(--accent-primary);
		}

		.faq-item summary:hover {
			color: var(--accent-secondary);
		}

		footer {
			background: var(--bg-secondary);
			border-top: 2px solid var(--accent-primary);
			text-align: center;
			padding: 2rem;
			margin-top: 4rem;
			color: var(--text-muted);
		}

		.status-indicator {
			display: inline-block;
			width: 12px;
			height: 12px;
			border-radius: 50%;
			margin-right: 0.5rem;
			animation: pulse 2s infinite;
		}

		.status-active {
			background: var(--success-color);
		}

		.status-warning {
			background: var(--accent-secondary);
		}

		@keyframes pulse {
			0% { opacity: 1; }
			50% { opacity: 0.5; }
			100% { opacity: 1; }
		}

		/* Keyboard navigation and focus styles */
		.skip-link {
			position: absolute;
			top: -40px;
			left: 6px;
			background: var(--accent-primary);
			color: var(--bg-primary);
			padding: 8px;
			text-decoration: none;
			border-radius: var(--radius-sm);
			font-weight: bold;
			z-index: 1000;
		}

		.skip-link:focus {
			top: 6px;
		}

		/* Enhanced focus indicators */
		a:focus, button:focus, input:focus, textarea:focus, select:focus {
			outline: 2px solid var(--accent-primary);
			outline-offset: 2px;
		}

		/* High contrast mode support */
		@media (prefers-contrast: high) {
			:root {
				--bg-primary: #000000;
				--bg-secondary: #1a1a1a;
				--text-primary: #ffffff;
				--accent-primary: #00ff00;
				--border-color: #666666;
			}
		}

		/* Reduced motion support */
		@media (prefers-reduced-motion: reduce) {
			* {
				animation-duration: 0.01ms !important;
				animation-iteration-count: 1 !important;
				transition-duration: 0.01ms !important;
			}
		}

		/* AI Safety Resources Section */
		.resources-container {
			max-width: 100%;
		}

		.resource-category {
			margin-bottom: 3rem;
		}

		.resource-category:last-child {
			margin-bottom: 0;
		}

		.resource-card {
			position: relative;
			transition: all var(--duration-base) var(--easing);
		}

		.resource-card:hover {
			transform: translateY(-3px);
			border-color: var(--accent-primary);
			box-shadow: 0 4px 8px rgba(0, 255, 65, 0.1);
		}

		.resource-card h4 {
			margin: 0 0 0.75rem 0;
			color: var(--text-primary);
		}

		.resource-card h4 a {
			color: var(--accent-primary);
			text-decoration: none;
			font-size: 1rem;
			font-weight: bold;
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
		}

		.resource-card h4 a:hover {
			text-decoration: underline;
		}

		.resource-card h4 a::after {
			content: "↗";
			font-size: 0.8rem;
			opacity: 0.7;
			transition: opacity var(--duration-base) var(--easing);
		}

		.resource-card h4 a:hover::after {
			opacity: 1;
		}

		.resource-card p {
			color: var(--text-secondary);
			margin: 0 0 1rem 0;
			line-height: 1.5;
			font-size: 0.9rem;
		}

		.resource-tag {
			display: inline-block;
			background: var(--bg-primary);
			color: var(--accent-primary);
			padding: 0.25rem 0.5rem;
			border-radius: var(--radius-sm);
			font-size: 0.75rem;
			font-weight: bold;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			border: 1px solid var(--accent-primary);
		}

		@media (max-width: 768px) {
			nav {
				flex-direction: column;
				gap: 1rem;
				padding: 1rem;
			}

			.logo-container {
				align-items: center;
			}

			.nav-links {
				gap: 1rem;
				flex-wrap: wrap;
				justify-content: center;
			}

			.dropdown-menu {
				position: static;
				opacity: 1;
				visibility: visible;
				transform: none;
				box-shadow: none;
				border: 1px solid var(--border-color);
				background: var(--bg-tertiary);
				display: none;
				margin-top: 0.5rem;
				border-radius: var(--radius-sm);
			}

			.dropdown-toggle[aria-expanded="true"] + .dropdown-menu,
			.dropdown:hover .dropdown-menu {
				display: block;
			}
            
			.hero h1 {
				font-size: 2rem;
			}
            
			main {
				padding: 1rem;
			}
		}
	</style>
	<script>
		// Load optional runtime config for non-Netlify hosting (e.g., DreamHost)
		window.__PDOOM_CONFIG__ = {};
		window.__PDOOM_STATUS__ = {};
		
		(async function loadConfig(){
			try {
				const res = await fetch('config.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_CONFIG__ = await res.json();
					// Apply contact email if present
					const email = window.__PDOOM_CONFIG__.contactEmail;
					if (email) {
						const link = document.getElementById('contact-email-link');
						if (link) {
							link.href = `mailto:${email}`;
							link.textContent = email;
						}
					}
				}
			} catch (_) {}
		})();
		
		// Load game status and update UI
		(async function loadGameStatus(){
			try {
				const res = await fetch('data/status.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_STATUS__ = await res.json();
					updateGameStatusUI();
				}
			} catch (_) {}
		})();
		
		function updateGameStatusUI() {
			const status = window.__PDOOM_STATUS__;
			if (!status.game) return;
			
			// Update hero section with current game info
			const heroSubtitle = document.querySelector('.hero .subtitle');
			if (heroSubtitle && status.game.warning) {
				const warningEl = document.createElement('div');
				warningEl.style.cssText = 'color: var(--accent-danger); font-weight: bold; margin-top: 1rem; padding: 0.5rem; background: rgba(255, 68, 68, 0.1); border-radius: var(--radius-sm); border: 1px solid var(--accent-danger);';
				warningEl.innerHTML = `Warning: ${status.game.warning}`;
				heroSubtitle.parentNode.insertBefore(warningEl, heroSubtitle.nextSibling);
			}
			
			// Update download link with latest release info
			const ctaButton = document.querySelector('.cta-button');
			if (ctaButton && status.game.latestRelease) {
				ctaButton.href = status.game.repository || ctaButton.href;
				ctaButton.innerHTML = `Download ${status.game.latestRelease.version || 'Latest'} (GitHub)`;
			}
			
			// Add game status info to the page
			const aboutSection = document.getElementById('about');
			if (aboutSection && status.game.development) {
				const statusInfo = document.createElement('div');
				statusInfo.style.cssText = 'margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-primary);';
				statusInfo.innerHTML = `
					<h3 style="color: var(--accent-primary); margin-bottom: 1rem;">[WIP] Current Development Status</h3>
					<p><strong>Phase:</strong> ${status.game.development.phase}</p>
					<p><strong>Progress:</strong> ${status.game.development.progress}</p>
					<p><strong>Latest Release:</strong> <a href="${status.game.latestRelease?.downloadUrl || status.game.repository}" style="color: var(--accent-primary);">${status.game.latestRelease?.version || 'Check GitHub'}</a></p>
					<p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
						Released: ${status.game.latestRelease?.date || 'N/A'} | 
						${status.game.latestRelease?.changelog || 'See repository for details'}
					</p>
				`;
				aboutSection.appendChild(statusInfo);
			}
			
			// Update footer with website version
			const footer = document.querySelector('footer p:last-child');
			if (footer && status.website) {
				footer.innerHTML = `
					<span class="status-indicator status-warning"></span>
					Game Status: ${status.game.status?.toUpperCase() || 'ALPHA'} Development | 
					Website v${status.website.version} | 
					Privacy: No personal data collected
				`;
			}
		}
		// Runtime tokens loader: pulls design/tokens.json and applies to :root
		(async function loadTokens() {
			try {
				const res = await fetch('design/tokens.json', { cache: 'no-store' });
				if (!res.ok) return;
				const t = await res.json();
				const r = document.documentElement;
				const set = (k, v) => v != null && r.style.setProperty(k, String(v));
				if (t.colors) {
					set('--bg-primary', t.colors.bgPrimary);
					set('--bg-secondary', t.colors.bgSecondary);
					set('--bg-tertiary', t.colors.bgTertiary);
					set('--text-primary', t.colors.textPrimary);
					set('--text-secondary', t.colors.textSecondary);
					set('--text-muted', t.colors.textMuted);
					set('--accent-primary', t.colors.accentPrimary);
					set('--accent-secondary', t.colors.accentSecondary);
					set('--accent-danger', t.colors.accentDanger);
					set('--border-color', t.colors.border);
					set('--success-color', t.colors.success);
				}
				if (t.shape) {
					set('--radius-sm', t.shape.radiusSm);
					set('--radius-md', t.shape.radiusMd);
					set('--radius-lg', t.shape.radiusLg);
					set('--border-width', t.shape.borderWidth);
					set('--shadow-button', t.shape.shadowButton);
				}
				if (t.motion) {
					set('--duration-fast', t.motion.durationFast);
					set('--duration-base', t.motion.durationBase);
					set('--easing', t.motion.easing);
				}
			} catch (e) {
				// ignore; defaults apply
			}
		})();
	</script>
	<link rel="preconnect" href="https://github.com" />
	<link rel="preconnect" href="https://cli.github.com" />
	<link rel="alternate" hreflang="en-au" href="https://pdoom1.com/" />

	<!-- Google Analytics (placeholder). Replace GA_ID to enable. -->
	<script>
	(function(){
	  var GA_ID = '';
	  if (!GA_ID) return; // disabled until configured
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);} 
	  gtag('js', new Date());
	  gtag('config', GA_ID);
	  var s=document.createElement('script');
	  s.async=true; s.src='https://www.googletagmanager.com/gtag/js?id='+encodeURIComponent(GA_ID);
	  document.head.appendChild(s);
	})();
	</script>
</head>
<body>
	<a href="#main-content" class="skip-link">Skip to main content</a>
	<header>
		<nav role="navigation" aria-label="Main navigation">
			<div class="logo-container">
				<div class="designer-credit">Pip Foweraker's</div>
				<a href="#" class="logo" aria-label="p(Doom)1 home">p(Doom)1</a>
			</div>
			<ul class="nav-links" role="menubar">
				<li role="none"><a href="#home" role="menuitem">Game</a></li>
				<li role="none"><a href="/leaderboard/" role="menuitem">Leaderboard</a></li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Community ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="#known-issues" role="menuitem">Known Issues</a></li>
						<li role="none"><a href="/blog/" role="menuitem">Dev Blog</a></li>
						<li role="none"><a href="/changelog/" role="menuitem">Updates</a></li>
						<li role="none"><a href="https://github.com/PipFoweraker/pdoom1" role="menuitem" target="_blank">GitHub</a></li>
					</ul>
				</li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Info ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="/about/" role="menuitem">About</a></li>
						<li role="none"><a href="/docs/roadmap.md" role="menuitem">Roadmap</a></li>
						<li role="none"><a href="/docs/" role="menuitem">Documentation</a></li>
						<!-- <li role="none"><a href="/press/" role="menuitem">Press Kit</a></li> -->
					</ul>
				</li>
			</ul>
		</nav>
	</header>

	<main role="main" id="main-content">
		<section class="hero" id="home" role="banner" aria-labelledby="main-heading">
			<h1 id="main-heading">p(Doom)1</h1>
			<p class="subtitle">A satirical meta-strategy game about AI Safety</p>
			<p style="margin-bottom: 1rem; color: var(--text-secondary);">
				<span class="status-indicator status-active"></span>
				Currently in Development - Alpha Release Available
			</p>
			
			<!-- Enhanced Download CTAs -->
			<div class="download-ctas" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem;">
				<a href="https://github.com/PipFoweraker/pdoom1/releases" class="cta-button" target="_blank" rel="noopener">
					Download 0.1.0 (Latest)
				</a>
				<!-- Press Kit temporarily hidden until game ready
				<a href="/press/" class="cta-button" style="background: var(--accent-secondary); border-color: var(--accent-secondary);">
					Press Kit
				</a>
				-->
			</div>
			
			<!-- Steam Coming Soon - Hidden until game ready for release -->
			<!-- 
			<div style="text-align: center; margin-top: 1.5rem;">
				<div style="display: inline-block; padding: 8px 16px; background: #171a21; border: 1px solid #2a475e; border-radius: 4px; color: #ffffff; font-family: 'Motiva Sans', Arial, sans-serif; font-size: 13px;">
					<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
						<path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3.71 10.89L10 9.38v-3.28c0-.44-.36-.8-.8-.8s-.8.36-.8.8v3.78l-2.11 1.31c-.14.09-.23.24-.23.41 0 .44.36.8.8.8.17 0 .32-.09.41-.23L8 10.89l1.14.69c.09.14.24.23.41.23.44 0 .8-.36.8-.8 0-.17-.09-.32-.23-.41z"/>
					</svg>
					Coming Soon to Steam
				</div>
				<div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 0.3rem; text-align: center;">
					(c)2025 Valve Corporation. Steam is a registered trademark.
				</div>
			</div>
			-->
		</section>

		<section class="stats" role="complementary" aria-label="Game statistics">
			<div class="stat" role="img" aria-label="This week's baseline doom percentage">
				<span class="stat-number" aria-hidden="true">23%</span>
				<span class="stat-label">Baseline Doom</span>
			</div>
			<div class="stat" role="img" aria-label="Number of frontier labs">
				<span class="stat-number" aria-hidden="true">7</span>
				<span class="stat-label">Frontier Labs</span>
			</div>
			<div class="stat" role="img" aria-label="Strategic possibilities in the game">
				<span class="stat-number" aria-hidden="true">10,000+</span>
				<span class="stat-label">Strategic Possibilities</span>
			</div>
		</section>
		
		<div style="text-align: center; margin: 1rem 0;">
			<a href="/stats/" style="color: var(--accent-primary); text-decoration: none; font-size: 0.9rem; opacity: 0.8; transition: opacity 0.2s;">
				View Detailed Game Statistics →
			</a>
		</div>

		<section class="section" id="about">
			<h2>About the Game</h2>
			<p>p(Doom)1 is a satirical meta-strategy game inspired by Papers Please, Pandemic, and clicker games. Navigate the complex world of AI safety research while managing resources, competing with other AI labs, and trying to prevent catastrophic outcomes.</p>
			
			<!-- Game Screenshots -->
			<div style="text-align: center; margin: 2rem 0;">
				<img src="assets/screenshot-placeholder-main.svg" alt="p(Doom)1 Main Game Interface" style="max-width: 100%; height: auto; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
			</div>
            
			<div class="grid">
				<div class="card">
					<h3>Resource Management</h3>
					<p>Balance money, staff, reputation, and p(Doom) levels as you make critical decisions about AI development.</p>
					<img src="assets/screenshot-placeholder-gameplay.svg" alt="Resource Management Interface" style="width: 100%; margin-top: 1rem; border-radius: var(--radius-sm);">
				</div>
				<div class="card">
					<h3>Research & Development</h3>
					<p>Publish papers, buy compute resources, and advance AI safety research while racing against competitors.</p>
					<img src="assets/screenshot-placeholder-ui.svg" alt="Research Interface" style="width: 100%; margin-top: 1rem; border-radius: var(--radius-sm);">
				</div>
				<div class="card">
					<h3>Dynamic Events</h3>
					<p>Handle unexpected challenges with our sophisticated event system featuring popup events, deferrals, and strategic timing.</p>
					<div style="margin-top: 1rem; padding: 1rem; background: var(--bg-primary); border-radius: var(--radius-sm); border: 1px dashed var(--accent-secondary);">
						<small style="color: var(--text-muted);">Event system screenshot coming soon...</small>
					</div>
				</div>
			</div>
		</section>

		<section class="section" id="roadmap">
			<h2>Roadmap</h2>
			<p>High-level milestones for the website and game distribution. Full details live in <a href="/docs/roadmap.md" style="color: var(--accent-primary);">docs/roadmap.md</a>. Also see <a href="/docs/pdoom1-open-issues.md" style="color: var(--accent-primary);">Open issues from the main repo</a> for day-to-day tasks.</p>
			<div class="grid">
				<div class="card">
					<h3>Short term (weeks)</h3>
					<ul>
						<li>Alpha updates 2-3x weekly via Dev Blog</li>
						<li>Automated posts to Discord, Bluesky, X, LinkedIn</li>
						<li>Bug intake via GitHub Issues (Netlify function)</li>
					</ul>
				</div>
				<div class="card">
					<h3>Mid term (months)</h3>
					<ul>
						<li>Steam release preparation</li>
						<li>Design tokens synced from main repo style guide</li>
						<li>Content pipeline from Airtable finalized</li>
					</ul>
				</div>
			</div>
		</section>

		<section class="section" id="known-issues">
			<h2>Known Issues & Development Status</h2>
			<p>Live updates from our development repository. See what we're working on and known issues before downloading.</p>
			
			<div id="github-issues-container">
				<div id="issues-loading" class="card" style="text-align: center; padding: 2rem;">
					<div style="color: var(--text-muted);">
						<div style="margin-bottom: 1rem;">Loading issues from GitHub...</div>
						<div style="font-size: 0.9rem;">This may take a few seconds</div>
					</div>
				</div>
				
				<div id="issues-error" class="card" style="text-align: center; padding: 2rem; display: none; background: var(--bg-tertiary); border: 1px solid var(--accent-danger);">
					<div style="color: var(--accent-danger);">
						<div style="margin-bottom: 1rem;">Unable to load live issues</div>
						<div style="font-size: 0.9rem; margin-bottom: 1rem;">GitHub API may be temporarily unavailable</div>
						<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" style="color: var(--accent-primary);">
							View issues directly on GitHub --&gt;
						</a>
					</div>
				</div>
				
				<div id="issues-content" style="display: none;">
					<div class="grid" id="issues-grid">
						<!-- Issues will be populated here -->
					</div>
					
					<div style="text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
						<div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
							<span id="issues-count">0</span> open issues - 
							Last updated: <span id="issues-timestamp">-</span>
						</div>
						<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
							<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" class="cta-button" style="background: var(--accent-secondary); border-color: var(--accent-secondary);">
								View All Issues on GitHub
							</a>
							<button id="refresh-issues" class="cta-button" style="background: var(--bg-tertiary); color: var(--text-primary); border-color: var(--border-color);">
								Refresh
							</button>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="section" id="ai-safety-resources" role="region" aria-labelledby="ai-safety-heading">
			<h2 id="ai-safety-heading">AI Safety Resources</h2>
			<p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
				Explore the broader AI Safety ecosystem that inspires p(Doom)1. Educational resources, research organizations, and community platforms.
			</p>
			
			<!-- Resource Categories -->
			<div class="resources-container" role="main" aria-label="AI Safety resource categories">
				<!-- Research Organizations -->
				<div class="resource-category">
					<h3 style="color: var(--accent-primary); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
						<span style="font-size: 1.2rem;" aria-hidden="true">[Lab]</span>
						Research Organizations
					</h3>
					<div class="grid">
						<div class="card resource-card">
							<h4><a href="https://miri.org" target="_blank" rel="noopener">Machine Intelligence Research Institute</a></h4>
							<p>Leading AI alignment research organization focused on ensuring smarter-than-human AI systems remain beneficial.</p>
							<span class="resource-tag">Research</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://anthropic.com" target="_blank" rel="noopener">Anthropic</a></h4>
							<p>AI safety company developing Constitutional AI and researching AI alignment techniques.</p>
							<span class="resource-tag">Research</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://safe.ai" target="_blank" rel="noopener">Center for AI Safety</a></h4>
							<p>Nonprofit dedicated to reducing societal-scale risks from artificial intelligence.</p>
							<span class="resource-tag">Research</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://humancompatible.ai" target="_blank" rel="noopener">Center for Human-Compatible AI</a></h4>
							<p>UC Berkeley research center developing AI systems that are provably aligned with human values.</p>
							<span class="resource-tag">Academic</span>
						</div>
					</div>
				</div>
				
				<!-- Educational Resources -->
				<div class="resource-category">
					<h3 style="color: var(--accent-primary); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
						<span style="font-size: 1.2rem;" aria-hidden="true">[Edu]</span>
						Educational Resources
					</h3>
					<div class="grid">
						<div class="card resource-card">
							<h4><a href="https://aisafetyfundamentals.com" target="_blank" rel="noopener">AI Safety Fundamentals</a></h4>
							<p>Comprehensive course covering key concepts in AI safety and alignment research.</p>
							<span class="resource-tag">Course</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://stampy.ai" target="_blank" rel="noopener">Stampy's AI Safety Info</a></h4>
							<p>Community-driven Q&A resource with answers to common AI safety questions.</p>
							<span class="resource-tag">Beginner</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://80000hours.org/problem-profiles/artificial-intelligence/" target="_blank" rel="noopener">80,000 Hours AI Safety</a></h4>
							<p>Career guide and problem profile for those interested in AI safety work.</p>
							<span class="resource-tag">Career</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://aisafety.info" target="_blank" rel="noopener">AI Safety Info</a></h4>
							<p>Comprehensive repository of AI safety research, papers, and educational materials.</p>
							<span class="resource-tag">Reference</span>
						</div>
					</div>
				</div>
				
				<!-- Policy & Governance -->
				<div class="resource-category">
					<h3 style="color: var(--accent-primary); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
						<span style="font-size: 1.2rem;" aria-hidden="true">[Gov]</span>
						Policy & Governance
					</h3>
					<div class="grid">
						<div class="card resource-card">
							<h4><a href="https://governance.ai" target="_blank" rel="noopener">Centre for the Governance of AI</a></h4>
							<p>Research organization focused on AI governance and policy development.</p>
							<span class="resource-tag">Policy</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://cset.georgetown.edu" target="_blank" rel="noopener">CSET Georgetown</a></h4>
							<p>Center for Security and Emerging Technology analyzing AI policy implications.</p>
							<span class="resource-tag">Policy</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://ai-plans.com" target="_blank" rel="noopener">AI Plans</a></h4>
							<p>Database of government AI strategies and policy documents worldwide.</p>
							<span class="resource-tag">Database</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://situational-awareness.ai" target="_blank" rel="noopener">Situational Awareness</a></h4>
							<p>Leopold Aschenbrenner's analysis of the AI race and national security implications.</p>
							<span class="resource-tag">Analysis</span>
						</div>
					</div>
				</div>
				
				<!-- Community -->
				<div class="resource-category">
					<h3 style="color: var(--accent-primary); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
						<span style="font-size: 1.2rem;" aria-hidden="true">[Community]</span>
						Community & Discussion
					</h3>
					<div class="grid">
						<div class="card resource-card">
							<h4><a href="https://forum.effectivealtruism.org" target="_blank" rel="noopener">EA Forum</a></h4>
							<p>Active community discussing AI safety research and effective altruism approaches.</p>
							<span class="resource-tag">Forum</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://alignmentforum.org" target="_blank" rel="noopener">Alignment Forum</a></h4>
							<p>Technical discussion forum for AI alignment research and ideas.</p>
							<span class="resource-tag">Technical</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://lesswrong.com" target="_blank" rel="noopener">LessWrong</a></h4>
							<p>Community blog focused on rationality, AI safety, and effective thinking.</p>
							<span class="resource-tag">Community</span>
						</div>
						<div class="card resource-card">
							<h4><a href="https://bluedot.org" target="_blank" rel="noopener">BlueDot Impact</a></h4>
							<p>Platform offering courses and programs in AI safety and effective altruism.</p>
							<span class="resource-tag">Training</span>
						</div>
					</div>
				</div>
			</div>
			
			<div style="text-align: center; margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
				<p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
					<strong>Note:</strong> p(Doom)1 is an independent satirical game and is not affiliated with any of these organizations.
				</p>
				<p style="color: var(--text-secondary); font-size: 0.9rem;">
					Last updated: January 2025 | <a href="https://github.com/PipFoweraker/pdoom1-website/issues" target="_blank" rel="noopener" style="color: var(--accent-primary);">Suggest additions</a>
				</p>
			</div>
		</section>

		<section class="section" id="download">
			<h2>Download & Get Started</h2>
			<p style="text-align: center; color: var(--text-secondary); margin-bottom: 3rem;">
				Get p(Doom)1 and start playing immediately. Free and open source.
			</p>
			
			<!-- Download Options -->
			<div class="grid" style="margin-bottom: 3rem;">
				<div class="card" style="text-align: center; border: 2px solid var(--accent-primary);">
					<h3 style="color: var(--accent-primary);">Quick Start (Recommended)</h3>
					<p style="margin: 1rem 0;">Download the latest pre-built release</p>
					<a href="https://github.com/PipFoweraker/pdoom1/releases" class="cta-button" target="_blank" rel="noopener" style="margin-bottom: 1rem; display: inline-block;">
						Download 0.1.0 (Latest)
					</a>
					<p style="font-size: 0.9rem; color: var(--text-muted);">Windows, macOS, Linux</p>
				</div>
				
				<div class="card" style="text-align: center;">
					<h3 style="color: var(--accent-secondary);">Developer Build</h3>
					<p style="margin: 1rem 0;">Clone and run from source</p>
					<a href="https://github.com/PipFoweraker/pdoom1" class="cta-button" target="_blank" rel="noopener" style="background: var(--accent-secondary); border-color: var(--accent-secondary); margin-bottom: 1rem; display: inline-block;">
						View Source Code
					</a>
					<p style="font-size: 0.9rem; color: var(--text-muted);">Requires Python 3.8+</p>
				</div>
			</div>

			<!-- System Requirements & Installation -->
			<div class="grid">
				<div class="card">
					<h3>System Requirements</h3>
					<div style="margin-top: 1rem;">
						<p><strong>Minimum:</strong></p>
						<ul style="color: var(--text-secondary); margin: 0.5rem 0 1rem 1.5rem;">
							<li>Python 3.8+ (for source builds)</li>
							<li>pygame library</li>
							<li>~50MB disk space</li>
							<li>Basic graphics support</li>
						</ul>
						<p><strong>Supported Platforms:</strong></p>
						<div style="display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap;">
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">Windows</span>
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">macOS</span>
							<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.9rem;">Linux</span>
						</div>
					</div>
				</div>
				
				<div class="card">
					<h3>Quick Installation</h3>
					<p style="margin-bottom: 1rem; color: var(--text-secondary);">For source builds:</p>
<pre style="background: var(--bg-primary); padding: 1rem; border-radius: var(--radius-sm, 4px); overflow-x: auto; color: var(--accent-primary); font-size: 0.9rem; line-height: 1.4;">git clone https://github.com/PipFoweraker/pdoom1.git
cd pdoom1
pip install -r requirements.txt
python main.py</pre>
					<p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted);">
						Or download the pre-built executable for instant play!
					</p>
				</div>
			</div>
			
			<!-- Additional Resources -->
			<div style="text-align: center; margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
				<h3 style="color: var(--accent-primary); margin-bottom: 1rem;">Need Help?</h3>
				<p style="color: var(--text-secondary); margin-bottom: 2rem;">Check out our documentation and community resources</p>
				<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
					<a href="/docs/" style="color: var(--accent-primary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--accent-primary); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">Documentation</a>
					<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" style="color: var(--accent-secondary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--accent-secondary); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">[Bug] Report Issues</a>
					<a href="/changelog/" style="color: var(--text-secondary); text-decoration: none; padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-sm); transition: all var(--duration-base) var(--easing);">Changelog</a>
				</div>
			</div>
		</section>

		<section class="section" id="faq" role="region" aria-labelledby="faq-heading">
			<h2 id="faq-heading">Frequently Asked Questions</h2>
			<div class="faq-grid" style="display: grid; gap: 2rem; margin-top: 2rem;">
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">What is p(Doom)1?</summary>
					<p style="color: var(--text-secondary);">p(Doom)1 is a satirical strategy game about AI Safety. You manage competing AI labs, make policy decisions, and try to prevent catastrophic outcomes while balancing resources and public perception.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">Is the game free?</summary>
					<p style="color: var(--text-secondary);">Yes! p(Doom)1 is completely free and open source. You can download it from GitHub or wait for the Steam release.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">What platforms are supported?</summary>
					<p style="color: var(--text-secondary);">p(Doom)1 runs on Windows, macOS, and Linux. It's built with Python and Pygame for maximum compatibility.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">When is the Steam release?</summary>
					<p style="color: var(--text-secondary);">We're preparing for Steam release soon! Follow our development blog for updates on the Steam launch timeline.</p>
				</details>
				
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 1rem;">Can I contribute to development?</summary>
					<p style="color: var(--text-secondary);">Absolutely! p(Doom)1 is open source. Check out our <a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">GitHub repository</a> to report issues, suggest features, or contribute code.</p>
				</details>
			</div>
		</section>

		<section class="section" id="support" role="region" aria-labelledby="support-heading">
			<h2 id="support-heading">Support & Bug Reports</h2>
			<p>Found a bug or need help? Report issues directly through our GitHub integration.</p>
            
			<div class="form-container">
				<form id="bug-report-form" role="form" aria-labelledby="bug-form-heading" novalidate>
					<h3 id="bug-form-heading" style="color: var(--accent-secondary); margin-bottom: 1.5rem;">Report a Bug</h3>
                    
					<div class="form-group">
						<label for="bug-title">Issue Title <span aria-label="required">*</span></label>
						<input type="text" id="bug-title" name="title" required 
							   placeholder="Brief description of the issue"
							   aria-describedby="title-error"
							   autocomplete="off">
						<div id="title-error" class="error-message" role="alert" aria-live="polite"></div>
					</div>
                    
					<div class="form-group">
						<label for="bug-type">Bug Type</label>
						<select id="bug-type" name="type" aria-describedby="type-help">
							<option value="bug">[Bug] Bug Report</option>
							<option value="feature">Feature Request</option>
							<option value="documentation">Documentation Issue</option>
							<option value="performance">Performance Issue</option>
						</select>
						<div id="type-help" class="form-help">Select the category that best describes your issue</div>
					</div>
                    
					<div class="form-group">
						<label for="bug-description">Description <span aria-label="required">*</span></label>
						<textarea id="bug-description" name="description" rows="6" required 
							placeholder="Detailed description of the issue, including steps to reproduce..."
							aria-describedby="description-error description-help"></textarea>
						<div id="description-help" class="form-help">Include steps to reproduce, expected behavior, and actual behavior</div>
						<div id="description-error" class="error-message" role="alert" aria-live="polite"></div>
					</div>
                    
					<div class="form-group">
						<label for="user-email">Email (Optional)</label>
						<input type="email" id="user-email" name="email" 
							   placeholder="your.email@example.com"
							   aria-describedby="email-help email-error"
							   autocomplete="email">
						<div id="email-help" class="form-help">Only used for follow-up questions. Not stored or shared.</div>
						<div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
					</div>
                    
					<button type="submit" class="cta-button" style="width: 100%;" 
							aria-describedby="submit-status">
						Submit Bug Report
					</button>
					<div id="submit-status" role="status" aria-live="polite"></div>
				</form>
			</div>
		</section>

		<section class="section" id="contact">
			<h2>Stay Connected</h2>
			<div class="grid">
				<div class="card">
					<h3>[Link] GitHub</h3>
					<p>Access source code, report issues, and contribute to development.</p>
					<a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">View Repository --&gt;</a>
				</div>
				<div class="card">
					<h3>[Mail] Newsletter</h3>
					<p>Get updates on new releases and development progress.</p>
					<form style="margin-top: 1rem;" id="newsletter-form">
						<input type="email" placeholder="Enter your email" style="margin-bottom: 1rem;">
						<button type="submit" class="cta-button" style="width: 100%; padding: 0.5rem;">Subscribe</button>
					</form>
				</div>
				<div class="card">
					<h3>Email</h3>
					<p>Prefer email? Reach us directly:</p>
					<p style="margin-top: 1rem;"><a id="contact-email-link" href="#" style="color: var(--accent-primary);">team@pdoom1.com</a></p>
				</div>
			</div>
		</section>
	</main>

	<footer>
		<p>&copy; 2025 pdoom1. Not affiliated with any AI organization. For fun, education, and satire only.</p>
		<p style="margin-top: 0.5rem; font-size: 0.8rem;">
			<span class="status-indicator status-warning"></span>
			Game Status: Active Development | Privacy: No personal data collected
		</p>
	</footer>

	<script>
		// Dropdown menu functionality with keyboard navigation
		document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
			toggle.addEventListener('click', function(e) {
				e.preventDefault();
				const dropdown = this.closest('.dropdown');
				const isExpanded = this.getAttribute('aria-expanded') === 'true';
				
				// Close all other dropdowns
				document.querySelectorAll('.dropdown-toggle').forEach(other => {
					other.setAttribute('aria-expanded', 'false');
				});
				
				// Toggle current dropdown
				this.setAttribute('aria-expanded', !isExpanded);
				
				// Focus first menu item when opening
				if (!isExpanded) {
					const firstMenuItem = dropdown.querySelector('.dropdown-menu a');
					if (firstMenuItem) {
						setTimeout(() => firstMenuItem.focus(), 100);
					}
				}
			});

			// Keyboard navigation for dropdown toggles
			toggle.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				
				if (e.key === 'Enter' || e.key === ' ') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'ArrowDown') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'Escape') {
					this.setAttribute('aria-expanded', 'false');
					this.focus();
				}
			});
		});

		// Keyboard navigation for dropdown menu items
		document.querySelectorAll('.dropdown-menu a').forEach((menuItem, index, menuItems) => {
			menuItem.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				const toggle = dropdown.querySelector('.dropdown-toggle');
				
				if (e.key === 'ArrowDown') {
					e.preventDefault();
					const nextIndex = (index + 1) % menuItems.length;
					const nextItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[nextIndex % dropdown.querySelectorAll('.dropdown-menu a').length];
					if (nextItem) nextItem.focus();
				} else if (e.key === 'ArrowUp') {
					e.preventDefault();
					const prevIndex = index === 0 ? dropdown.querySelectorAll('.dropdown-menu a').length - 1 : index - 1;
					const prevItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[prevIndex];
					if (prevItem) prevItem.focus();
				} else if (e.key === 'Escape') {
					e.preventDefault();
					toggle.setAttribute('aria-expanded', 'false');
					toggle.focus();
				} else if (e.key === 'Tab') {
					// Allow natural tab behavior, but close dropdown
					toggle.setAttribute('aria-expanded', 'false');
				}
			});
		});

		// Close dropdowns when clicking outside
		document.addEventListener('click', function(e) {
			if (!e.target.closest('.dropdown')) {
				document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
					toggle.setAttribute('aria-expanded', 'false');
				});
			}
		});

		// Smooth scrolling for navigation links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});

		// Enhanced statistics animation on scroll
		const observerOptions = {
			threshold: 0.5,
			rootMargin: '0px 0px -100px 0px'
		};

		const animateStats = (entries, observer) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.style.opacity = '1';
					entry.target.style.transform = 'translateY(0)';
				}
			});
		};

		if (window.IntersectionObserver) {
			const statsObserver = new IntersectionObserver(animateStats, observerOptions);
			document.querySelectorAll('.stat').forEach(stat => {
				stat.style.opacity = '0';
				stat.style.transform = 'translateY(20px)';
				stat.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
				statsObserver.observe(stat);
			});
		}

		// Form validation helpers
		function showError(fieldId, message) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'true');
			errorDiv.textContent = message;
			errorDiv.classList.add('visible');
		}
		
		function clearError(fieldId) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'false');
			errorDiv.textContent = '';
			errorDiv.classList.remove('visible');
		}
		
		function updateStatus(message, isError = false) {
			const statusDiv = document.getElementById('submit-status');
			statusDiv.textContent = message;
			statusDiv.style.color = isError ? 'var(--accent-danger)' : 'var(--success-color)';
		}

		// Bug report form submission -> shared backend
	document.getElementById('bug-report-form').addEventListener('submit', async function(e) {
			e.preventDefault();
			
			const button = e.target.querySelector('button[type="submit"]');
			const originalText = button.textContent;
			button.disabled = true;
			
			try {
				const formData = new FormData(e.target);
				const bugData = {
					title: formData.get('title'),
					type: formData.get('type') || 'bug',
					description: formData.get('description'),
					email: formData.get('email') || '',
					source: 'web'
				};
				
				// Local mock: when running on localhost, simulate a successful submission
				const isLocal = ['localhost','127.0.0.1','[::1]'].includes(window.location.hostname) || 
					window.location.hostname.startsWith('192.168.') ||
					window.location.port === '8002' ||
					window.location.href.includes('localhost');
				
				if (isLocal) {
					button.textContent = 'Submitting...';
					await new Promise(r => setTimeout(r, 400));
					button.textContent = '[OK] Report Submitted! (local mock)';
					button.style.background = 'var(--success-color)';
					setTimeout(() => {
						button.textContent = originalText;
						button.style.background = '';
						e.target.reset();
						button.disabled = false;
					}, 2000);
					return;
				}
				
				// Production API submission
				const base = (window.__PDOOM_CONFIG__ && window.__PDOOM_CONFIG__.apiBase) || '';
				const url = (base ? base.replace(/\/$/, '') : '') + '/api/report-bug';
				const res = await fetch(url, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify(bugData)
				});
				if (!res.ok) throw new Error('Failed to submit');
				button.textContent = '[OK] Report Submitted!';
				button.style.background = 'var(--success-color)';
				setTimeout(() => {
					button.textContent = originalText;
					button.style.background = '';
					e.target.reset();
					button.disabled = false;
				}, 3000);
				
			} catch (err) {
				button.textContent = '[ERROR] Submit Failed';
				button.style.background = 'var(--accent-danger)';
				setTimeout(() => {
					button.textContent = originalText;
					button.style.background = '';
					button.disabled = false;
				}, 3000);
			}
		});
        
		// Newsletter form
		document.getElementById('newsletter-form').addEventListener('submit', function(e) {
			e.preventDefault();
			const input = e.target.querySelector('input[type="email"]');
			const email = (window.__PDOOM_CONFIG__ && window.__PDOOM_CONFIG__.contactEmail) || 'team@pdoom1.com';
			const subject = encodeURIComponent('Subscribe: pdoom1 newsletter');
			const body = encodeURIComponent(`Please subscribe this address: ${input?.value || ''}`);
			window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
		});
        
		// Smooth scrolling for nav links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});
		
		// GitHub Issues Integration
		class GitHubIssuesLoader {
			constructor() {
				this.apiUrl = 'https://api.github.com/repos/PipFoweraker/pdoom1/issues';
				this.cache = null;
				this.cacheExpiry = 5 * 60 * 1000; // 5 minutes
				this.lastFetch = 0;
			}
			
			async fetchIssues() {
				const now = Date.now();
				
				// Return cached data if still fresh
				if (this.cache && (now - this.lastFetch < this.cacheExpiry)) {
					return this.cache;
				}
				
				try {
					const response = await fetch(this.apiUrl + '?state=open&per_page=10&sort=updated', {
						headers: {
							'Accept': 'application/vnd.github.v3+json'
						}
					});
					
					if (!response.ok) {
						throw new Error(`GitHub API error: ${response.status}`);
					}
					
					const issues = await response.json();
					this.cache = issues;
					this.lastFetch = now;
					
					return issues;
				} catch (error) {
					console.warn('Failed to fetch GitHub issues:', error);
					throw error;
				}
			}
			
			formatIssueCard(issue) {
				const labels = issue.labels.map(label => 
					`<span class="issue-label" style="background: #${label.color}; color: ${this.getContrastColor(label.color)}; padding: 2px 6px; border-radius: 3px; font-size: 0.75rem; margin-right: 4px;">${label.name}</span>`
				).join('');
				
				const updatedDate = new Date(issue.updated_at).toLocaleDateString();
				const isPriority = issue.labels.some(l => l.name.includes('priority-high') || l.name.includes('critical'));
				const isBug = issue.labels.some(l => l.name === 'bug');
				
				const icon = isBug ? '[BUG]' : isPriority ? '[!]' : '[FEAT]';
				const cardClass = isPriority ? 'priority-issue' : '';
				
				return `
					<div class="card issue-card ${cardClass}" style="position: relative;">
						<div style="display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 1rem;">
							<span style="font-size: 1.2rem;">${icon}</span>
							<div style="flex: 1; min-width: 0;">
								<h4 style="margin: 0 0 0.5rem 0; font-size: 1rem; line-height: 1.3;">
									<a href="${issue.html_url}" target="_blank" rel="noopener" style="color: var(--text-primary); text-decoration: none;">
										${this.escapeHtml(issue.title)}
									</a>
								</h4>
								<div style="margin-bottom: 0.5rem;">
									${labels}
								</div>
								<div style="color: var(--text-muted); font-size: 0.8rem;">
									#${issue.number} - Updated ${updatedDate}
								</div>
							</div>
						</div>
						${isPriority ? '<div style="position: absolute; top: 8px; right: 8px; background: var(--accent-danger); color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; font-weight: bold;">HIGH PRIORITY</div>' : ''}
					</div>
				`;
			}
			
			escapeHtml(text) {
				const div = document.createElement('div');
				div.textContent = text;
				return div.innerHTML;
			}
			
			getContrastColor(hexColor) {
				// Convert hex to RGB
				const r = parseInt(hexColor.substr(0, 2), 16);
				const g = parseInt(hexColor.substr(2, 2), 16);
				const b = parseInt(hexColor.substr(4, 2), 16);
				
				// Calculate luminance
				const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
				
				return luminance > 0.5 ? '#000000' : '#ffffff';
			}
			
			async renderIssues() {
				const loadingEl = document.getElementById('issues-loading');
				const errorEl = document.getElementById('issues-error');
				const contentEl = document.getElementById('issues-content');
				const gridEl = document.getElementById('issues-grid');
				const countEl = document.getElementById('issues-count');
				const timestampEl = document.getElementById('issues-timestamp');
				
				// Show loading state
				loadingEl.style.display = 'block';
				errorEl.style.display = 'none';
				contentEl.style.display = 'none';
				
				try {
					const issues = await this.fetchIssues();
					
					// Hide loading, show content
					loadingEl.style.display = 'none';
					contentEl.style.display = 'block';
					
					// Populate issues grid
					if (issues.length === 0) {
						gridEl.innerHTML = `
							<div class="card" style="text-align: center; padding: 2rem; grid-column: 1 / -1;">
								<div style="color: var(--success-color); margin-bottom: 1rem;">[OK] No open issues!</div>
								<div style="color: var(--text-muted);">Everything is working smoothly</div>
							</div>
						`;
					} else {
						gridEl.innerHTML = issues.map(issue => this.formatIssueCard(issue)).join('');
					}
					
					// Update metadata
					countEl.textContent = issues.length;
					timestampEl.textContent = new Date().toLocaleTimeString();
					
				} catch (error) {
					// Try to show fallback data from static issues
					try {
						const fallbackIssues = await this.getFallbackIssues();
						if (fallbackIssues && fallbackIssues.length > 0) {
							loadingEl.style.display = 'none';
							contentEl.style.display = 'block';
							
							gridEl.innerHTML = fallbackIssues.map(issue => this.formatIssueCard(issue)).join('') + `
								<div class="card" style="text-align: center; padding: 1rem; grid-column: 1 / -1; background: var(--bg-tertiary); border: 1px solid var(--accent-secondary);">
									<div style="color: var(--accent-secondary); font-size: 0.9rem;">
										[WARNING] Showing cached issues - Live data temporarily unavailable
									</div>
								</div>
							`;
							
							countEl.textContent = fallbackIssues.length + ' (cached)';
							timestampEl.textContent = 'Cached data';
						} else {
							throw error; // Fall through to error state
						}
					} catch (fallbackError) {
						// Show error state
						loadingEl.style.display = 'none';
						errorEl.style.display = 'block';
						contentEl.style.display = 'none';
					}
				}
			}
			
			async getFallbackIssues() {
				// Try to fetch from static markdown file as fallback
				try {
					const response = await fetch('/docs/pdoom1-open-issues.md');
					if (response.ok) {
						const markdown = await response.text();
						return this.parseMarkdownIssues(markdown);
					}
				} catch (e) {
					// Fallback to hardcoded recent issues
					return [
						{
							number: 245,
							title: 'Post-Rebase Test Failures: 5 Functional Issues Requiring Investigation',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/245',
							updated_at: '2025-09-09T06:16:52Z',
							labels: [{ name: 'bug', color: 'd73a4a' }]
						},
						{
							number: 240,
							title: 'UI Interaction Issues: Button clicks and spacebar not working consistently',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/240',
							updated_at: '2025-09-07T22:05:21Z',
							labels: [{ name: 'bug', color: 'd73a4a' }, { name: 'ui-ux', color: '7057ff' }]
						},
						{
							number: 232,
							title: 'Drop Python 3.8 Support Initiative',
							html_url: 'https://github.com/PipFoweraker/pdoom1/issues/232',
							updated_at: '2025-09-04T23:27:29Z',
							labels: [
								{ name: 'enhancement', color: 'a2eeef' },
								{ name: 'priority-high', color: 'b60205' },
								{ name: 'technical-debt', color: 'fef2c0' }
							]
						}
					];
				}
				return [];
			}
			
			parseMarkdownIssues(markdown) {
				// Simple parser for the existing markdown format
				const lines = markdown.split('\n');
				const issues = [];
				
				for (const line of lines) {
					const match = line.match(/- \[#(\d+)\]\(([^)]+)\) (.+?) \| labels: ([^|]*) \| milestone: ([^|]*) \| updated: (.+)/);
					if (match) {
						const [, number, url, title, labelsStr, milestone, updated] = match;
						const labels = labelsStr.split(', ')
							.filter(l => l.trim())
							.map(name => ({ name: name.trim(), color: this.getLabelColor(name.trim()) }));
						
						issues.push({
							number: parseInt(number),
							title: title.trim(),
							html_url: url,
							updated_at: updated.trim(),
							labels: labels
						});
					}
				}
				
				return issues.slice(0, 10); // Limit to 10 issues
			}
			
			getLabelColor(labelName) {
				const colorMap = {
					'bug': 'd73a4a',
					'enhancement': 'a2eeef',
					'documentation': '0075ca',
					'priority-high': 'b60205',
					'priority-medium': 'fbca04',
					'technical-debt': 'fef2c0',
					'ui-ux': '7057ff',
					'audio': 'c2e0c6'
				};
				return colorMap[labelName] || '6f42c1'; // Default purple
			}
		}
		
		// Initialize GitHub issues loader
		const issuesLoader = new GitHubIssuesLoader();
		
		// Load issues when page loads
		document.addEventListener('DOMContentLoaded', () => {
			issuesLoader.renderIssues();
		});
		
		// Refresh button functionality
		document.addEventListener('DOMContentLoaded', () => {
			const refreshBtn = document.getElementById('refresh-issues');
			if (refreshBtn) {
				refreshBtn.addEventListener('click', async () => {
					const originalText = refreshBtn.textContent;
					refreshBtn.textContent = 'Refreshing...';
					refreshBtn.disabled = true;
					
					// Force cache refresh
					issuesLoader.cache = null;
					issuesLoader.lastFetch = 0;
					
					await issuesLoader.renderIssues();
					
					setTimeout(() => {
						refreshBtn.textContent = originalText;
						refreshBtn.disabled = false;
					}, 1000);
				});
			}
		});
		
		// Load and update version information
		async function loadVersionInfo() {
			try {
				const response = await fetch('/data/version.json', { cache: 'no-store' });
				const versionData = await response.json();
				
				// Update stats with real data
				const stats = document.querySelectorAll('.stat');
				if (stats.length >= 3) {
					// Update baseline doom with stubbed value
					stats[0].querySelector('.stat-number').textContent = `${versionData.game_stats.baseline_doom_percent}%`;
					
					// Update frontier labs count  
					stats[1].querySelector('.stat-number').textContent = versionData.game_stats.frontier_labs_count;
					
					// Update strategic possibilities
					const possibilities = versionData.game_stats.strategic_possibilities;
					const formattedPossibilities = possibilities >= 1000 ? `${(possibilities/1000).toFixed(0)}k+` : possibilities;
					stats[2].querySelector('.stat-number').textContent = formattedPossibilities;
				}
				
				// Update version info in download buttons if needed
				const downloadButtons = document.querySelectorAll('a[href*="releases"]');
				downloadButtons.forEach(button => {
					if (button.textContent.includes('Download') && button.textContent.includes('Latest')) {
						button.textContent = `Download ${versionData.latest_release.version} (Latest)`;
						button.href = versionData.latest_release.html_url;
					}
				});
				
				console.log('Version info updated:', versionData.latest_release.version);
			} catch (error) {
				console.warn('Could not load version info:', error);
			}
		}
		
		// Load version info when page loads
		document.addEventListener('DOMContentLoaded', () => {
			loadVersionInfo();
		});
	</script>
	
	<!-- Add CSS for GitHub Issues -->
	<style>
		.issue-card {
			transition: all var(--duration-base) var(--easing);
		}
		
		.issue-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 255, 65, 0.15);
		}
		
		.issue-card.priority-issue {
			border-left: 4px solid var(--accent-danger);
		}
		
		.issue-label {
			display: inline-block;
			white-space: nowrap;
		}
		
		#github-issues-container {
			margin-top: 2rem;
		}
		
		@media (max-width: 768px) {
			.issue-card h4 {
				font-size: 0.9rem;
			}
			
			.issue-label {
				font-size: 0.7rem !important;
				padding: 1px 4px !important;
			}
		}
	</style>
</body>
</html>
