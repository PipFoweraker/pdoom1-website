<!DOCTYPE html>
<html lang="en-AU">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>p(Doom)1 - AI Safety Strategy Game</title>
	<link rel="canonical" href="https://pdoom1.com/" />
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" />
	<meta name="description" content="p(Doom)1 is a satirical meta-strategy game about AI Safety. Manage labs, policy, and p(doom) while avoiding catastrophic outcomes." />
	<meta name="author" content="p(Doom)1" />
	<meta property="og:type" content="website" />
	<meta property="og:site_name" content="p(Doom)1" />
	<meta property="og:title" content="p(Doom)1 - AI Safety Strategy Game" />
	<meta property="og:description" content="A satirical meta-strategy game about AI Safety." />
	<meta property="og:url" content="https://pdoom1.com/" />
	<meta property="og:image" content="https://pdoom1.com/assets/pdoom_logo_1.png" />
	<meta name="twitter:card" content="summary_large_image" />
	<!-- twitter:site intentionally omitted until handle is finalized (must be ASCII, suggest @pdoom1) -->

	<!-- Performance: Preconnect to external resources -->
	<link rel="preconnect" href="https://api.github.com">
	<link rel="dns-prefetch" href="https://api.github.com">
	<link rel="preconnect" href="https://stampy.ai">
	<link rel="dns-prefetch" href="https://stampy.ai">

	<style>
		:root {
			/* Color scheme inspired by typical pygame/terminal aesthetics */
			--bg-primary: #1a1a1a;
			--bg-secondary: #2d2d2d;
			--bg-tertiary: #3d3d3d;
			--text-primary: #ffffff;
			--text-secondary: #cccccc;
			--text-muted: #aaaaaa;
			--accent-primary: #00ff41;  /* Matrix green */
			--accent-secondary: #ff6b35; /* Warning orange */
			--accent-danger: #ff4444;   /* Error red */
			--border-color: #444444;
			--success-color: #4caf50;

			/* Tokens that may be injected from /design/tokens.json */
			--radius-sm: 4px;
			--radius-md: 6px;
			--radius-lg: 10px;
			--border-width: 1px;
			--shadow-button: 0 10px 20px rgba(0, 255, 65, 0.3);
			--duration-fast: 150ms;
			--duration-base: 300ms;
			--easing: cubic-bezier(0.2, 0.8, 0.2, 1);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Courier New', monospace;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			background-image: 
				radial-gradient(circle at 25% 25%, rgba(0, 255, 65, 0.02) 0%, transparent 50%),
				radial-gradient(circle at 75% 75%, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
		}

		header {
			background: var(--bg-secondary);
			border-bottom: 2px solid var(--accent-primary);
			padding: 0.4rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		nav {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 1rem;
			gap: 0.5rem;
			flex-wrap: nowrap;
		}

		.logo-container {
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: 0.4rem;
			flex-shrink: 0;
		}

		.designer-credit {
			font-size: 0.75rem;
			color: var(--text-muted);
			font-weight: normal;
			letter-spacing: 0.3px;
			white-space: nowrap;
		}

		.logo {
			font-size: 1.3rem;
			font-weight: bold;
			color: var(--accent-primary);
			text-decoration: none;
			text-shadow: 0 0 10px var(--accent-primary);
			white-space: nowrap;
		}

		.nav-links {
			display: flex;
			gap: 0.8rem;
			list-style: none;
			flex-wrap: nowrap;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			transition: color var(--duration-base) var(--easing);
			padding: 0.3rem 0.6rem;
			border: 1px solid transparent;
			font-size: 0.9rem;
			font-weight: 600;
			white-space: nowrap;
		}

		.nav-links a:hover {
			color: var(--accent-primary);
			border-color: var(--accent-primary);
		}

		/* Dropdown Navigation */
		.dropdown {
			position: relative;
		}

		.dropdown-toggle {
			cursor: pointer;
		}

		.dropdown-menu {
			position: absolute;
			top: 100%;
			right: 0;
			background: var(--bg-secondary);
			border: 1px solid var(--border-color);
			border-radius: var(--radius-md);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all var(--duration-base) var(--easing);
			min-width: 150px;
			z-index: 1000;
			list-style: none;
			padding: 0.5rem 0;
			margin: 0;
		}

		.dropdown:hover .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.dropdown-menu li {
			margin: 0;
		}

		.dropdown-menu a {
			display: block;
			padding: 0.5rem 1rem;
			color: var(--text-secondary);
			text-decoration: none;
			border: none;
			transition: all var(--duration-fast) ease;
		}

		.dropdown-menu a:hover {
			background: var(--bg-tertiary);
			color: var(--accent-primary);
			border-radius: 0;
		}

		main {
			max-width: 1200px;
			margin: 0 auto;
			padding: 1rem;
		}

		.hero {
			text-align: center;
			padding: 1.5rem 1rem 1.2rem 1rem;
			background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
			border-radius: var(--radius-lg, 10px);
			margin-bottom: 1.5rem;
			border: var(--border-width, 1px) solid var(--border-color);
		}

		.hero h1 {
			font-size: 2.5rem;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
			text-shadow: 0 0 20px var(--accent-primary);
		}

		.hero .subtitle {
			font-size: 1rem;
			color: var(--text-secondary);
			margin-bottom: 0.8rem;
		}

		.cta-button {
			display: inline-block;
			background: linear-gradient(45deg, var(--accent-primary), var(--success-color));
			color: var(--bg-primary);
			padding: 0.8rem 1.6rem;
			text-decoration: none;
			border-radius: var(--radius-md, 6px);
			font-weight: bold;
			transition: transform var(--duration-base) var(--easing), box-shadow var(--duration-base) var(--easing);
			border: none;
			cursor: pointer;
			font-family: inherit;
			font-size: 1rem;
		}

		.cta-button:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-button, 0 10px 20px rgba(0, 255, 65, 0.3));
		}

		.section {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 1rem;
			margin-bottom: 1.2rem;
		}

		.section h2 {
			color: var(--accent-secondary);
			margin-bottom: 0.8rem;
			font-size: 1.5rem;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
			gap: 1rem;
			margin-top: 1rem;
		}

		.card {
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 1rem;
			transition: transform var(--duration-base) var(--easing), border-color var(--duration-base) var(--easing);
		}

		.card:hover {
			transform: translateY(-5px);
			border-color: var(--accent-primary);
		}

		.card h3 {
			color: var(--accent-primary);
			margin-bottom: 0.6rem;
		}

		.stats {
			display: flex;
			justify-content: space-around;
			text-align: center;
			padding: 0.8rem 0;
		}

		.stat {
			flex: 1;
		}

		.stat-number {
			font-size: 2.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			display: block;
			background: transparent !important;
		}

		.loading-number {
			background: transparent !important;
			color: var(--text-muted) !important;
		}

		.loading-placeholder {
			background: transparent !important;
			color: var(--text-muted) !important;
		}

		.stat-label {
			color: var(--text-muted);
			font-size: 0.9rem;
		}

		.stat-link {
			text-decoration: none;
			color: inherit;
			transition: all var(--duration-base) var(--easing);
			border-radius: var(--radius-md);
			padding: 1rem;
			margin: 0 0.5rem;
			display: block;
		}

		.stat-link:hover {
			background: var(--bg-secondary);
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 255, 65, 0.2);
		}

		.stat-link:hover .stat-number {
			color: var(--accent-secondary);
			text-shadow: 0 0 10px var(--accent-secondary);
		}

		.roadmap-card:hover {
			border-color: var(--accent-primary);
			background: var(--bg-tertiary);
		}

		.form-container {
			background: var(--bg-secondary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-md, 6px);
			padding: 1rem;
			max-width: 600px;
			margin: 1rem auto;
		}

		.form-group {
			margin-bottom: 0.8rem;
		}

		label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
		}

		input, textarea, select {
			width: 100%;
			padding: 0.8rem;
			background: var(--bg-tertiary);
			border: var(--border-width, 1px) solid var(--border-color);
			border-radius: var(--radius-sm, 4px);
			color: var(--text-primary);
			font-family: inherit;
		}

		input:focus, textarea:focus, select:focus {
			outline: none;
			border-color: var(--accent-primary);
			box-shadow: 0 0 0 2px rgba(0, 255, 65, 0.2);
		}

		.form-help {
			font-size: 0.85rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		.error-message {
			font-size: 0.85rem;
			color: var(--accent-danger);
			margin-top: 0.25rem;
			display: none;
		}

		.error-message.visible {
			display: block;
		}

		input[aria-invalid="true"], 
		textarea[aria-invalid="true"], 
		select[aria-invalid="true"] {
			border-color: var(--accent-danger);
			box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.2);
		}

		/* FAQ Section Styling */
		.faq-item summary {
			list-style: none;
			position: relative;
			padding-right: 2rem;
		}

		.faq-item summary::-webkit-details-marker {
			display: none;
		}

		.faq-item summary::after {
			content: '+';
			position: absolute;
			right: 0;
			top: 0;
			font-size: 1.2rem;
			color: var(--accent-primary);
			transition: transform var(--duration-base) var(--easing);
		}

		.faq-item[open] summary::after {
			transform: rotate(45deg);
		}

		.faq-item[open] {
			border-color: var(--accent-primary);
		}

		.faq-item summary:hover {
			color: var(--accent-secondary);
		}

		footer {
			background: var(--bg-secondary);
			border-top: 2px solid var(--accent-primary);
			text-align: center;
			padding: 1rem;
			margin-top: 2rem;
			color: var(--text-muted);
		}

		.status-indicator {
			display: inline-block;
			width: 12px;
			height: 12px;
			border-radius: 50%;
			margin-right: 0.5rem;
			animation: pulse 2s infinite;
		}

		.status-active {
			background: var(--success-color);
		}

		.status-warning {
			background: var(--accent-secondary);
		}

		@keyframes pulse {
			0% { opacity: 1; }
			50% { opacity: 0.5; }
			100% { opacity: 1; }
		}

		/* Keyboard navigation and focus styles */
		.skip-link {
			position: absolute;
			top: -40px;
			left: 6px;
			background: var(--accent-primary);
			color: var(--bg-primary);
			padding: 8px;
			text-decoration: none;
			border-radius: var(--radius-sm);
			font-weight: bold;
			z-index: 1000;
		}

		.skip-link:focus {
			top: 6px;
		}

		/* Enhanced focus indicators */
		a:focus, button:focus, input:focus, textarea:focus, select:focus {
			outline: 2px solid var(--accent-primary);
			outline-offset: 2px;
		}

		/* High contrast mode support */
		@media (prefers-contrast: high) {
			:root {
				--bg-primary: #000000;
				--bg-secondary: #1a1a1a;
				--text-primary: #ffffff;
				--accent-primary: #00ff00;
				--border-color: #666666;
			}
		}

		/* Reduced motion support */
		@media (prefers-reduced-motion: reduce) {
			* {
				animation-duration: 0.01ms !important;
				animation-iteration-count: 1 !important;
				transition-duration: 0.01ms !important;
			}
		}

		/* AI Safety Resources Section */
		.resources-container {
			max-width: 100%;
		}

		.resource-category {
			margin-bottom: 3rem;
		}

		.resource-category:last-child {
			margin-bottom: 0;
		}

		.resource-card {
			position: relative;
			transition: all var(--duration-base) var(--easing);
		}

		.resource-card:hover {
			transform: translateY(-3px);
			border-color: var(--accent-primary);
			box-shadow: 0 4px 8px rgba(0, 255, 65, 0.1);
		}

		.resource-card h4 {
			margin: 0 0 0.75rem 0;
			color: var(--text-primary);
		}

		.resource-card h4 a {
			color: var(--accent-primary);
			text-decoration: none;
			font-size: 1rem;
			font-weight: bold;
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
		}

		.resource-card h4 a:hover {
			text-decoration: underline;
		}

		.resource-card h4 a::after {
			content: "↗";
			font-size: 0.8rem;
			opacity: 0.7;
			transition: opacity var(--duration-base) var(--easing);
		}

		.resource-card h4 a:hover::after {
			opacity: 1;
		}

		.resource-card p {
			color: var(--text-secondary);
			margin: 0 0 1rem 0;
			line-height: 1.5;
			font-size: 0.9rem;
		}

		.resource-tag {
			display: inline-block;
			background: var(--bg-primary);
			color: var(--accent-primary);
			padding: 0.25rem 0.5rem;
			border-radius: var(--radius-sm);
			font-size: 0.75rem;
			font-weight: bold;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			border: 1px solid var(--accent-primary);
		}

		@media (max-width: 768px) {
			nav {
				flex-direction: column;
				gap: 1rem;
				padding: 1rem;
			}

			.logo-container {
				align-items: center;
			}

			.nav-links {
				gap: 1rem;
				flex-wrap: wrap;
				justify-content: center;
			}

			.dropdown-menu {
				position: static;
				opacity: 1;
				visibility: visible;
				transform: none;
				box-shadow: none;
				border: 1px solid var(--border-color);
				background: var(--bg-tertiary);
				display: none;
				margin-top: 0.5rem;
				border-radius: var(--radius-sm);
			}

			.dropdown-toggle[aria-expanded="true"] + .dropdown-menu,
			.dropdown:hover .dropdown-menu {
				display: block;
			}
            
			.hero h1 {
				font-size: 2rem;
			}
            
			main {
				padding: 1rem;
			}
		}
	</style>
	<script>
		// Load optional runtime config for non-Netlify hosting (e.g., DreamHost)
		window.__PDOOM_CONFIG__ = {};
		window.__PDOOM_STATUS__ = {};
		
		(async function loadConfig(){
			try {
				const res = await fetch('config.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_CONFIG__ = await res.json();
					// Apply contact email if present
					const email = window.__PDOOM_CONFIG__.contactEmail;
					if (email) {
						const link = document.getElementById('contact-email-link');
						if (link) {
							link.href = `mailto:${email}`;
							link.textContent = email;
						}
					}
				}
			} catch (_) {}
		})();
		
		// Load game status and update UI
		(async function loadGameStatus(){
			try {
				const res = await fetch('data/status.json', { cache: 'no-store' });
				if (res.ok) {
					window.__PDOOM_STATUS__ = await res.json();
					updateGameStatusUI();
				}
			} catch (_) {}
		})();
		
		function updateGameStatusUI() {
			const status = window.__PDOOM_STATUS__;
			if (!status.game) return;
			
			// Update hero section with current game info
			const heroSubtitle = document.querySelector('.hero .subtitle');
			if (heroSubtitle && status.game.warning) {
				const warningEl = document.createElement('div');
				warningEl.style.cssText = 'color: var(--accent-danger); font-weight: bold; margin-top: 1rem; padding: 0.5rem; background: rgba(255, 68, 68, 0.1); border-radius: var(--radius-sm); border: 1px solid var(--accent-danger);';
				warningEl.innerHTML = `Warning: ${status.game.warning}`;
				heroSubtitle.parentNode.insertBefore(warningEl, heroSubtitle.nextSibling);
			}
			
			// Update download link with latest release info
			const ctaButton = document.querySelector('.cta-button');
			if (ctaButton && status.game.latestRelease) {
				ctaButton.href = status.game.repository || ctaButton.href;
				ctaButton.innerHTML = `Download ${status.game.latestRelease.version || 'Latest'} (GitHub)`;
			}
			
			// Add game status info to the page
			const aboutSection = document.getElementById('about');
			if (aboutSection && status.game.development) {
				const statusInfo = document.createElement('div');
				statusInfo.style.cssText = 'margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-primary);';
				statusInfo.innerHTML = `
					<h3 style="color: var(--accent-primary); margin-bottom: 1rem;">[WIP] Current Development Status</h3>
					<p><strong>Phase:</strong> ${status.game.development.phase}</p>
					<p><strong>Progress:</strong> ${status.game.development.progress}</p>
					<p><strong>Latest Release:</strong> <a href="${status.game.latestRelease?.downloadUrl || status.game.repository}" style="color: var(--accent-primary);">${status.game.latestRelease?.version || 'Check GitHub'}</a></p>
					<p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
						Released: ${status.game.latestRelease?.date || 'N/A'} | 
						${status.game.latestRelease?.changelog || 'See repository for details'}
					</p>
				`;
				aboutSection.appendChild(statusInfo);
			}
			
			// Update footer with website version
			const versionElement = document.getElementById('website-version');
			if (versionElement && status.website) {
				versionElement.textContent = `Website v${status.website.version}`;
			}
		}
		// Runtime tokens loader: pulls design/tokens.json and applies to :root
		(async function loadTokens() {
			try {
				const res = await fetch('design/tokens.json', { cache: 'no-store' });
				if (!res.ok) return;
				const t = await res.json();
				const r = document.documentElement;
				const set = (k, v) => v != null && r.style.setProperty(k, String(v));
				if (t.colors) {
					set('--bg-primary', t.colors.bgPrimary);
					set('--bg-secondary', t.colors.bgSecondary);
					set('--bg-tertiary', t.colors.bgTertiary);
					set('--text-primary', t.colors.textPrimary);
					set('--text-secondary', t.colors.textSecondary);
					set('--text-muted', t.colors.textMuted);
					set('--accent-primary', t.colors.accentPrimary);
					set('--accent-secondary', t.colors.accentSecondary);
					set('--accent-danger', t.colors.accentDanger);
					set('--border-color', t.colors.border);
					set('--success-color', t.colors.success);
				}
				if (t.shape) {
					set('--radius-sm', t.shape.radiusSm);
					set('--radius-md', t.shape.radiusMd);
					set('--radius-lg', t.shape.radiusLg);
					set('--border-width', t.shape.borderWidth);
					set('--shadow-button', t.shape.shadowButton);
				}
				if (t.motion) {
					set('--duration-fast', t.motion.durationFast);
					set('--duration-base', t.motion.durationBase);
					set('--easing', t.motion.easing);
				}
			} catch (e) {
				// ignore; defaults apply
			}
		})();
	</script>
	<link rel="preconnect" href="https://github.com" />
	<link rel="preconnect" href="https://cli.github.com" />
	<link rel="alternate" hreflang="en-au" href="https://pdoom1.com/" />


	<link rel="stylesheet" href="/assets/css/game-integration.css">
	<link rel="stylesheet" href="/assets/css/ui-enhancements.css">
	<link rel="stylesheet" href="/css/site.css">
</head>
<body>
	<a href="#main-content" class="skip-link">Skip to main content</a>
	<header>
		<nav role="navigation" aria-label="Main navigation">
			<div class="logo-container">
				<div class="designer-credit">Pip Foweraker's</div>
				<a href="#" class="logo" aria-label="p(Doom)1 home">p(Doom)1</a>
			</div>
			<ul class="nav-links" role="menubar">
				<li role="none"><a href="#home" role="menuitem">Game</a></li>
				<li role="none"><a href="/leaderboard/" role="menuitem">Leaderboard</a></li>
				<li role="none"><a href="/game-stats/" role="menuitem">Stats</a></li>
				<li role="none"><a href="/dashboard/" role="menuitem">Risk Dashboard</a></li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Community ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="/issues/" role="menuitem">Issues & Feedback</a></li>
						<li role="none"><a href="/blog/" role="menuitem">Dev Blog</a></li>
						<li role="none"><a href="/game-changelog/" role="menuitem">Updates</a></li>
						<li role="none"><a href="https://github.com/PipFoweraker/pdoom1" role="menuitem" target="_blank">GitHub</a></li>
					</ul>
				</li>
				<li role="none" class="dropdown">
					<a href="#" role="menuitem" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">Info ▾</a>
					<ul class="dropdown-menu" role="menu">
						<li role="none"><a href="/about/" role="menuitem">About</a></li>
						<li role="none"><a href="/resources/" role="menuitem">AI Safety Resources</a></li>
						<li role="none"><a href="/docs/roadmap.md" role="menuitem">Roadmap</a></li>
						<li role="none"><a href="/docs/" role="menuitem">Documentation</a></li>
						<!-- <li role="none"><a href="/press/" role="menuitem">Press Kit</a></li> -->
					</ul>
				</li>
			</ul>
		</nav>
	</header>

	<main role="main" id="main-content">
		<section class="hero" id="home" role="banner" aria-labelledby="main-heading">
			<h1 id="main-heading">p(Doom)1</h1>
			<p class="subtitle">Practice saving the world from deadly AI through bureaucracy</p>
			<p style="margin-bottom: 0.8rem; color: var(--text-secondary); font-size: 0.95rem;">
				<span class="status-indicator status-active"></span>
				Currently in Development - Alpha Release Available
			</p>

			<!-- Download Options - Primary CTAs -->
			<div class="download-ctas" style="display: flex; gap: 0.8rem; justify-content: center; flex-wrap: wrap; margin-bottom: 0.8rem;">
				<a href="https://github.com/PipFoweraker/pdoom1/releases" class="cta-button" style="font-size: 1rem; padding: 0.8rem 1.5rem;" target="_blank" rel="noopener">
					<span class="loading-placeholder">Download 0.1.0 (Latest)</span>
				</a>
				<a href="https://github.com/PipFoweraker/pdoom1" class="cta-button" style="background: var(--accent-secondary); border-color: var(--accent-secondary); font-size: 1rem; padding: 0.8rem 1.5rem;" target="_blank" rel="noopener">
					View on GitHub →
				</a>
			</div>

			<!-- Steam Badge - Commented out until available
			<div style="text-align: center; margin-top: 1rem;">
				<a href="https://store.steampowered.com/app/XXXXX/pdoom1" target="_blank" rel="noopener" style="text-decoration: none;">
					<div style="display: inline-block; padding: 12px 24px; background: #171a21; border: 1px solid #2a475e; border-radius: 4px; color: #ffffff; font-family: 'Motiva Sans', Arial, sans-serif; font-size: 14px; transition: all 0.2s ease; cursor: pointer;">
						<div style="display: flex; align-items: center; gap: 8px;">
							<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
								<path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm4.64 13.36L12 11.72v-4.1c0-.55-.45-1-1-1s-1 .45-1 1v4.72l-2.64 1.64c-.18.11-.29.3-.29.51 0 .55.45 1 1 1 .21 0 .4-.11.51-.29L10 13.36l1.42.86c.11.18.3.29.51.29.55 0 1-.45 1-1 0-.21-.11-.4-.29-.51z"/>
							</svg>
							<span>Available on Steam</span>
						</div>
					</div>
				</a>
				<div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 0.3rem;">
					©2025 Valve Corporation. Steam and the Steam logo are trademarks and/or registered trademarks of Valve Corporation in the U.S. and/or other countries.
				</div>
			</div>
			-->

			<p style="font-size: 0.85rem; color: var(--text-muted); text-align: center;">
				Windows, macOS, Linux | Free & Open Source
			</p>
		</section>

		<!-- Live Game Stats & Status - Combined Section -->
		<section class="section" style="background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(0, 255, 65, 0.05) 100%); border-left: 4px solid var(--accent-primary);">
			<h2 style="color: var(--accent-primary); display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
				<span class="status-indicator status-active" style="animation: pulse 2s infinite;"></span>
				Live Game Stats & Status
			</h2>

			<!-- Top Row: Key Game Stats -->
			<div class="stats" role="complementary" aria-label="Game statistics" style="padding: 0; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.8rem; margin-bottom: 1rem;">
				<a href="/game-stats/" class="stat-link" role="img" aria-label="This week's baseline doom percentage" style="background: var(--bg-tertiary); border-radius: var(--radius-md); padding: 1rem; text-align: center;">
					<div class="stat">
						<span class="stat-number loading-number" aria-hidden="true" style="font-size: 2rem; color: var(--accent-primary);">--</span>
						<span class="stat-label" style="font-size: 0.9rem; color: var(--text-muted);">Baseline Doom</span>
					</div>
				</a>
				<a href="/frontier-labs/" class="stat-link" role="img" aria-label="Number of frontier labs in model" style="background: var(--bg-tertiary); border-radius: var(--radius-md); padding: 1rem; text-align: center;">
					<div class="stat">
						<span class="stat-number loading-number" aria-hidden="true" style="font-size: 2rem; color: var(--accent-primary);">7</span>
						<span class="stat-label" style="font-size: 0.9rem; color: var(--text-muted);">Frontier Labs</span>
					</div>
				</a>
				<a href="/game-stats/" class="stat-link" role="img" aria-label="Strategic possibilities" style="background: var(--bg-tertiary); border-radius: var(--radius-md); padding: 1rem; text-align: center;">
					<div class="stat">
						<span class="stat-number loading-number" aria-hidden="true" style="font-size: 2rem; color: var(--accent-primary);">--</span>
						<span class="stat-label" style="font-size: 0.9rem; color: var(--text-muted);">Strategic Possibilities</span>
					</div>
				</a>
			</div>

			<!-- Bottom Row: Detailed Status Cards -->
			<div class="grid">
				<div class="card">
					<h3 style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 0.8rem;">Current Version</h3>
					<p style="font-size: 1.5rem; font-weight: bold; color: var(--accent-primary); margin: 0.3rem 0;">
						<span id="current-version-display" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.3rem;">
						Released: <span id="release-date" class="loading-placeholder">...</span>
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted);">
						<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" style="color: var(--accent-secondary); text-decoration: none;">
							<span id="open-issues-count" class="loading-placeholder">--</span> open issues
						</a>
					</p>
				</div>
				<div class="card">
					<h3 style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 0.8rem;">Weekly League</h3>
					<p style="font-size: 1.5rem; font-weight: bold; color: var(--accent-primary); margin: 0.3rem 0;">
						<span id="current-week-display" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.3rem;">
						<span id="week-time-remaining" class="loading-placeholder">...</span>
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted);">
						<a href="/leaderboard/" style="color: var(--accent-secondary); text-decoration: none;">
							<span id="league-participants" class="loading-placeholder">--</span> participants →
						</a>
					</p>
				</div>
				<div class="card">
					<h3 style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 0.8rem;">Last Updated</h3>
					<p style="font-size: 1.2rem; font-weight: bold; color: var(--accent-primary); margin: 0.3rem 0;">
						<span id="last-update-time" class="loading-placeholder">Loading...</span>
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.3rem;">
						Data syncs every 6 hours
					</p>
					<p style="font-size: 0.8rem; color: var(--text-muted);">
						<a href="/monitoring/" style="color: var(--accent-secondary); text-decoration: none;">
							System status →
						</a>
					</p>
				</div>
			</div>

			<!-- View More CTA -->
			<div style="text-align: center; margin-top: 0.8rem;">
				<a href="/game-stats/" class="cta-button" style="display: inline-block; font-size: 0.85rem; padding: 0.5rem 1rem;">
					📊 View Detailed Statistics →
				</a>
			</div>
		</section>



		<section class="section" id="about">
			<h2>About the Game</h2>
			<p style="margin-bottom: 1rem;">p(Doom)1 is a satirical meta-strategy game inspired by Papers Please, Pandemic, and clicker games. Navigate the complex world of AI safety research while managing resources, competing with other AI labs, and trying to prevent catastrophic outcomes. Learn more about real AI Safety research at <a href="https://stampy.ai" target="_blank" rel="noopener" style="color: var(--accent-primary);">Stampy.ai</a>.</p>

			<!-- Tabbed Content -->
			<div class="about-tabs">
				<div class="tab-buttons" style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
					<button class="tab-btn active" data-tab="features" style="flex: 1; min-width: 120px; padding: 0.8rem 1rem; background: var(--accent-primary); color: var(--bg-primary); border: none; border-radius: var(--radius-sm); font-family: inherit; font-weight: bold; cursor: pointer; transition: all 0.2s;">Features</button>
					<button class="tab-btn" data-tab="screenshots" style="flex: 1; min-width: 120px; padding: 0.8rem 1rem; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-family: inherit; font-weight: bold; cursor: pointer; transition: all 0.2s;">Screenshots</button>
					<button class="tab-btn" data-tab="requirements" style="flex: 1; min-width: 120px; padding: 0.8rem 1rem; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-family: inherit; font-weight: bold; cursor: pointer; transition: all 0.2s;">Requirements</button>
				</div>

				<!-- Features Tab -->
				<div class="tab-content active" id="features-tab">
					<div class="grid">
						<div class="card">
							<h3>Resource Management</h3>
							<p>Balance money, staff, reputation, and p(Doom) levels as you make critical decisions about AI development.</p>
						</div>
						<div class="card">
							<h3>Research & Development</h3>
							<p>Publish papers, buy compute resources, and advance AI safety research while racing against competitors.</p>
						</div>
						<div class="card">
							<h3>Dynamic Events</h3>
							<p>Handle unexpected challenges with our sophisticated event system featuring popup events, deferrals, and strategic timing.</p>
						</div>
					</div>
				</div>

				<!-- Screenshots Tab -->
				<div class="tab-content" id="screenshots-tab" style="display: none;">
					<div style="text-align: center; margin-bottom: 1rem;">
						<img src="assets/screenshot-placeholder-main.svg" alt="p(Doom)1 Main Game Interface" style="max-width: 100%; height: auto; border-radius: var(--radius-md); border: 1px solid var(--border-color);" loading="lazy" decoding="async">
					</div>
					<div class="grid">
						<div style="text-align: center;">
							<img src="assets/screenshot-placeholder-gameplay.svg" alt="Resource Management Interface" style="width: 100%; border-radius: var(--radius-sm); border: 1px solid var(--border-color);" loading="lazy" decoding="async">
							<p style="margin-top: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Resource Management</p>
						</div>
						<div style="text-align: center;">
							<img src="assets/screenshot-placeholder-ui.svg" alt="Research Interface" style="width: 100%; border-radius: var(--radius-sm); border: 1px solid var(--border-color);" loading="lazy" decoding="async">
							<p style="margin-top: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Research & Development</p>
						</div>
						<div style="text-align: center; display: flex; align-items: center; justify-content: center; background: var(--bg-primary); border-radius: var(--radius-sm); border: 1px dashed var(--accent-secondary); padding: 2rem;">
							<small style="color: var(--text-muted);">Event system screenshot coming soon...</small>
						</div>
					</div>
				</div>

				<!-- Requirements Tab -->
				<div class="tab-content" id="requirements-tab" style="display: none;">
					<div class="grid">
						<div class="card">
							<h3>System Requirements</h3>
							<p style="margin-bottom: 0.8rem;"><strong>Minimum:</strong></p>
							<ul style="color: var(--text-secondary); margin: 0 0 1rem 1.2rem; line-height: 1.8;">
								<li>Python 3.8+ (for source builds)</li>
								<li>pygame library</li>
								<li>~50MB disk space</li>
								<li>Basic graphics support</li>
							</ul>
							<p style="margin-bottom: 0.5rem;"><strong>Platforms:</strong></p>
							<div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
								<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.85rem;">Windows</span>
								<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.85rem;">macOS</span>
								<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: var(--radius-sm); font-size: 0.85rem;">Linux</span>
							</div>
						</div>
						<div class="card">
							<h3>Quick Installation</h3>
							<p style="margin-bottom: 0.8rem;">For source builds:</p>
<pre style="background: var(--bg-primary); padding: 0.8rem; border-radius: var(--radius-sm); overflow-x: auto; color: var(--accent-primary); font-size: 0.85rem; line-height: 1.4; margin: 0;">git clone https://github.com/PipFoweraker/pdoom1.git
cd pdoom1
pip install -r requirements.txt
python main.py</pre>
							<p style="margin-top: 0.8rem; font-size: 0.85rem; color: var(--text-muted);">
								Or download the pre-built executable for instant play!
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<script>
		// Tab switching functionality
		document.addEventListener('DOMContentLoaded', () => {
			const tabButtons = document.querySelectorAll('.tab-btn');
			const tabContents = document.querySelectorAll('.tab-content');

			tabButtons.forEach(button => {
				button.addEventListener('click', () => {
					const tabName = button.getAttribute('data-tab');

					// Remove active class from all buttons and contents
					tabButtons.forEach(btn => {
						btn.classList.remove('active');
						btn.style.background = 'var(--bg-tertiary)';
						btn.style.color = 'var(--text-primary)';
						btn.style.border = '1px solid var(--border-color)';
					});
					tabContents.forEach(content => {
						content.classList.remove('active');
						content.style.display = 'none';
					});

					// Add active class to clicked button and corresponding content
					button.classList.add('active');
					button.style.background = 'var(--accent-primary)';
					button.style.color = 'var(--bg-primary)';
					button.style.border = 'none';

					const activeContent = document.getElementById(`${tabName}-tab`);
					if (activeContent) {
						activeContent.classList.add('active');
						activeContent.style.display = 'block';
					}
				});
			});
		});
		</script>


		<section class="section" id="roadmap">
			<h2>Roadmap</h2>
			<p style="margin-bottom: 1.2rem;">High-level milestones for the website and game. <a href="/docs/roadmap.md" style="color: var(--accent-primary);">View full roadmap →</a></p>
			<div class="grid">
				<a href="/docs/roadmap.md" class="card roadmap-card" style="text-decoration: none; color: inherit;">
					<h3>Short term (weeks) 📅</h3>
					<ul style="margin: 0.8rem 0; padding-left: 1.2rem;">
						<li>Alpha updates 2-3x weekly</li>
						<li>Social media automation</li>
						<li>Community forum launch</li>
					</ul>
				</a>
				<a href="/docs/roadmap.md" class="card roadmap-card" style="text-decoration: none; color: inherit;">
					<h3>Mid term (months) 🚀</h3>
					<ul style="margin: 0.8rem 0; padding-left: 1.2rem;">
						<li>Steam release</li>
						<li>Reward system for contributors</li>
						<li>Content pipeline automation</li>
					</ul>
				</a>
			</div>
		</section>

		<section class="section" id="help-support">
			<h2>Help & Support</h2>
			<p style="color: var(--text-secondary); text-align: center; margin-bottom: 1.5rem;">
				Need help, found a bug, or want to learn more about AI Safety?
			</p>
			<div class="grid">
				<div class="card" style="text-align: center;">
					<h3 style="color: var(--accent-primary);">Report Issues</h3>
					<p style="margin-bottom: 1rem;">Found a bug or have a suggestion?</p>
					<a href="/issues/" class="cta-button" style="display: inline-block;">Submit Feedback →</a>
				</div>
				<div class="card" style="text-align: center;">
					<h3 style="color: var(--accent-secondary);">Documentation</h3>
					<p style="margin-bottom: 1rem;">Get started or troubleshoot</p>
					<a href="/docs/" class="cta-button" style="background: var(--accent-secondary); display: inline-block;">View Docs →</a>
				</div>
				<div class="card" style="text-align: center;">
					<h3 style="color: var(--text-primary);">Learn AI Safety</h3>
					<p style="margin-bottom: 1rem;">Explore resources from <a href="https://stampy.ai" target="_blank" rel="noopener" style="color: var(--accent-primary);">Stampy.ai</a> and more</p>
					<a href="/resources/" class="cta-button" style="background: var(--bg-tertiary); color: var(--text-primary); display: inline-block;">AI Safety Resources →</a>
				</div>
			</div>
		</section>

		<section class="section" id="faq" role="region" aria-labelledby="faq-heading">
			<h2 id="faq-heading">Quick FAQ</h2>
			<div class="faq-grid" style="display: grid; gap: 1.2rem; margin-top: 1.5rem;">
				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.2rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 0.8rem;">What is p(Doom)1?</summary>
					<p style="color: var(--text-secondary); font-size: 0.95rem;">A satirical strategy game about AI Safety. Manage AI labs, make policy decisions, and prevent catastrophic outcomes. Inspired by real AI Safety debates and research from <a href="https://aisafety.info" target="_blank" rel="noopener" style="color: var(--accent-primary);">aisafety.info</a>.</p>
				</details>

				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.2rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 0.8rem;">Is it free and open source?</summary>
					<p style="color: var(--text-secondary); font-size: 0.95rem;">Yes! Completely free on <a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">GitHub</a>. Windows, macOS, and Linux supported. Steam release coming soon.</p>
				</details>

				<details class="faq-item" style="background: var(--bg-tertiary); padding: 1.2rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
					<summary style="font-weight: bold; color: var(--accent-primary); cursor: pointer; margin-bottom: 0.8rem;">Want to learn more about AI Safety?</summary>
					<p style="color: var(--text-secondary); font-size: 0.95rem;">Check out <a href="https://stampy.ai" target="_blank" rel="noopener" style="color: var(--accent-primary);">Stampy.ai</a> (AI Safety Q&A), <a href="https://www.aisafety.com" target="_blank" rel="noopener" style="color: var(--accent-primary);">aisafety.com</a>, and our <a href="/resources/" style="color: var(--accent-primary);">resources page</a> for curated links.</p>
				</details>
			</div>
			<p style="text-align: center; margin-top: 1.5rem; color: var(--text-muted);">
				More questions? <a href="/docs/" style="color: var(--accent-primary);">View full documentation</a> or <a href="/issues/" style="color: var(--accent-primary);">ask the community</a>
			</p>
		</section>

		<section class="section" id="contact">
			<h2>Stay Connected</h2>
			<div class="grid">
				<div class="card">
					<h3>[Link] GitHub</h3>
					<p>Access source code, report issues, and contribute to development.</p>
					<a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);">View Repository --&gt;</a>
				</div>
				<div class="card">
					<h3>[Mail] Newsletter</h3>
					<p>Get updates on new releases and development progress.</p>
					<form class="newsletter-form" id="newsletter-form">
						<input type="email" name="email" placeholder="Enter your email" aria-label="Email address for newsletter subscription" class="newsletter-input" required>
						<button type="submit" class="cta-button" style="width: 100%; padding: 0.5rem;">Subscribe</button>
					</form>
				</div>
				<div class="card">
					<h3>Email</h3>
					<p>Prefer email? Reach us directly:</p>
					<p style="margin-top: 1rem;"><a id="contact-email-link" href="#" style="color: var(--accent-primary);">team@pdoom1.com</a></p>
				</div>
			</div>
		</section>
	</main>

	<!-- Quick Actions Menu -->
	<div class="quick-actions" id="quick-actions">
		<button class="quick-actions-toggle" id="quick-actions-toggle" aria-label="Quick Actions Menu" title="Quick Actions (Press Q)">
			⚡
		</button>
		<div class="quick-actions-menu" id="quick-actions-menu">
			<a href="#overview" class="quick-action" title="Jump to Overview">📋</a>
			<a href="#features" class="quick-action" title="View Features">⭐</a>
			<a href="/game-stats/" class="quick-action" title="Game Statistics">📊</a>
			<a href="/blog/" class="quick-action" title="Developer Blog">📝</a>
			<a href="#roadmap" class="quick-action" title="Development Roadmap">🗺️</a>
			<a href="#contact" class="quick-action" title="Contact Us">✉️</a>
		</div>
	</div>

	<footer>
		<div class="footer-content">
			<div class="footer-section">
				<h3>Game</h3>
				<ul class="footer-links">
					<li><a href="/#about">About</a></li>
					<li><a href="/#about" data-tab="features">Features</a></li>
					<li><a href="/game-stats/">Statistics</a></li>
					<li><a href="/leaderboard/">Leaderboard</a></li>
					<li><a href="/game-changelog/">Releases</a></li>
					<li><a href="/dashboard/">Risk Dashboard</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Help & Support</h3>
				<ul class="footer-links">
					<li><a href="/issues/">Report Issue</a></li>
					<li><a href="/docs/">Documentation</a></li>
					<li><a href="/#faq">FAQ</a></li>
					<li><a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener">GitHub Issues</a></li>
					<li><a href="mailto:team@pdoom1.com">Email Support</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Community</h3>
				<ul class="footer-links">
					<li><a href="https://github.com/PipFoweraker/pdoom1" target="_blank" rel="noopener">GitHub</a></li>
					<li><a href="/blog/">Dev Blog</a></li>
					<li><a href="/#roadmap">Roadmap</a></li>
					<li><a href="/resources/">AI Safety Resources</a></li>
					<li><a href="https://stampy.ai" target="_blank" rel="noopener">Stampy.ai</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h3>Site</h3>
				<ul class="footer-links">
					<li><a href="/sitemap.xml">Sitemap</a></li>
					<li><a href="/website-changelog/">Changelog</a></li>
					<li><a href="/monitoring/">System Status</a></li>
					<li><a href="/about/">About This Site</a></li>
					<li style="margin-top: 0.8rem;">
						<span class="status-indicator status-active"></span>
						<span style="font-size: 0.85rem; color: var(--text-muted);">Live</span>
					</li>
					<li>
						<span id="website-version" style="font-size: 0.85rem; color: var(--text-muted);">v1.1.1</span>
					</li>
				</ul>
			</div>
		</div>
		<div class="footer-bottom">
			<p>&copy; 2025 p(Doom)1 by <a href="https://github.com/PipFoweraker" target="_blank" rel="noopener" style="color: var(--accent-primary); text-decoration: none; font-weight: bold;">Pip Foweraker</a></p>
			<p class="footer-meta" style="margin-top: 0.5rem;">
				Privacy: No personal data collected | Open Source |
				Inspired by AI Safety research from <a href="https://stampy.ai" target="_blank" rel="noopener" style="color: var(--accent-primary);">Stampy.ai</a> and others
			</p>
		</div>
	</footer>

	<script>
		// Dropdown menu functionality with keyboard navigation
		document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
			toggle.addEventListener('click', function(e) {
				e.preventDefault();
				const dropdown = this.closest('.dropdown');
				const isExpanded = this.getAttribute('aria-expanded') === 'true';
				
				// Close all other dropdowns
				document.querySelectorAll('.dropdown-toggle').forEach(other => {
					other.setAttribute('aria-expanded', 'false');
				});
				
				// Toggle current dropdown
				this.setAttribute('aria-expanded', !isExpanded);
				
				// Focus first menu item when opening
				if (!isExpanded) {
					const firstMenuItem = dropdown.querySelector('.dropdown-menu a');
					if (firstMenuItem) {
						setTimeout(() => firstMenuItem.focus(), 100);
					}
				}
			});

			// Keyboard navigation for dropdown toggles
			toggle.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				
				if (e.key === 'Enter' || e.key === ' ') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'ArrowDown') {
					e.preventDefault();
					this.click();
				} else if (e.key === 'Escape') {
					this.setAttribute('aria-expanded', 'false');
					this.focus();
				}
			});
		});

		// Keyboard navigation for dropdown menu items
		document.querySelectorAll('.dropdown-menu a').forEach((menuItem, index, menuItems) => {
			menuItem.addEventListener('keydown', function(e) {
				const dropdown = this.closest('.dropdown');
				const toggle = dropdown.querySelector('.dropdown-toggle');
				
				if (e.key === 'ArrowDown') {
					e.preventDefault();
					const nextIndex = (index + 1) % menuItems.length;
					const nextItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[nextIndex % dropdown.querySelectorAll('.dropdown-menu a').length];
					if (nextItem) nextItem.focus();
				} else if (e.key === 'ArrowUp') {
					e.preventDefault();
					const prevIndex = index === 0 ? dropdown.querySelectorAll('.dropdown-menu a').length - 1 : index - 1;
					const prevItem = Array.from(dropdown.querySelectorAll('.dropdown-menu a'))[prevIndex];
					if (prevItem) prevItem.focus();
				} else if (e.key === 'Escape') {
					e.preventDefault();
					toggle.setAttribute('aria-expanded', 'false');
					toggle.focus();
				} else if (e.key === 'Tab') {
					// Allow natural tab behavior, but close dropdown
					toggle.setAttribute('aria-expanded', 'false');
				}
			});
		});

		// Close dropdowns when clicking outside
		document.addEventListener('click', function(e) {
			if (!e.target.closest('.dropdown')) {
				document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
					toggle.setAttribute('aria-expanded', 'false');
				});
			}
		});

		// Smooth scrolling for navigation links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});

		// Enhanced statistics animation on scroll
		const observerOptions = {
			threshold: 0.5,
			rootMargin: '0px 0px -100px 0px'
		};

		const animateStats = (entries, observer) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.style.opacity = '1';
					entry.target.style.transform = 'translateY(0)';
				}
			});
		};

		if (window.IntersectionObserver) {
			const statsObserver = new IntersectionObserver(animateStats, observerOptions);
			document.querySelectorAll('.stat').forEach(stat => {
				stat.style.opacity = '0';
				stat.style.transform = 'translateY(20px)';
				stat.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
				statsObserver.observe(stat);
			});
		}

		// Form validation helpers
		function showError(fieldId, message) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'true');
			errorDiv.textContent = message;
			errorDiv.classList.add('visible');
		}
		
		function clearError(fieldId) {
			const field = document.getElementById(fieldId);
			const errorDiv = document.getElementById(fieldId.replace('bug-', '') + '-error');
			
			field.setAttribute('aria-invalid', 'false');
			errorDiv.textContent = '';
			errorDiv.classList.remove('visible');
		}
		
		function updateStatus(message, isError = false) {
			const statusDiv = document.getElementById('submit-status');
			statusDiv.textContent = message;
			statusDiv.style.color = isError ? 'var(--accent-danger)' : 'var(--success-color)';
		}

		// Newsletter form
		document.getElementById('newsletter-form').addEventListener('submit', function(e) {
			e.preventDefault();
			const input = e.target.querySelector('input[type="email"]');
			const email = (window.__PDOOM_CONFIG__ && window.__PDOOM_CONFIG__.contactEmail) || 'team@pdoom1.com';
			const subject = encodeURIComponent('Subscribe: pdoom1 newsletter');
			const body = encodeURIComponent(`Please subscribe this address: ${input?.value || ''}`);
			window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
		});
        
		// Smooth scrolling for nav links
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				e.preventDefault();
				const target = document.querySelector(this.getAttribute('href'));
				if (target) {
					target.scrollIntoView({
						behavior: 'smooth',
						block: 'start'
					});
				}
			});
		});
		
		// GitHub Issues section removed - now on dedicated /issues/ page
		// Load and update version information
		async function loadVersionInfo() {
			try {
				const response = await fetch('/data/version.json', { cache: 'no-store' });
				const versionData = await response.json();
				
				// Update stats with real data
				const stats = document.querySelectorAll('.stat');
				if (stats.length >= 3) {
					// Update baseline doom with stubbed value
					stats[0].querySelector('.stat-number').textContent = `${versionData.game_stats.baseline_doom_percent}%`;
					
					// Update frontier labs count  
					stats[1].querySelector('.stat-number').textContent = versionData.game_stats.frontier_labs_count;
					
					// Update strategic possibilities
					const possibilities = versionData.game_stats.strategic_possibilities;
					const formattedPossibilities = possibilities >= 1000 ? `${(possibilities/1000).toFixed(0)}k+` : possibilities;
					stats[2].querySelector('.stat-number').textContent = formattedPossibilities;
				}
				
				// Update version info in download buttons if needed
				const downloadButtons = document.querySelectorAll('a[href*="releases"]');
				downloadButtons.forEach(button => {
					if (button.textContent.includes('Download') && button.textContent.includes('Latest')) {
						button.textContent = `Download ${versionData.latest_release.version} (Latest)`;
						button.href = versionData.latest_release.html_url;
					}
				});
				
				console.log('Version info updated:', versionData.latest_release.version);
			} catch (error) {
				console.warn('Could not load version info:', error);
			}
		}
		
		// Load version info when page loads
		document.addEventListener('DOMContentLoaded', () => {
			loadVersionInfo();
		});
	</script>

	<script>
		// Quick Actions Menu functionality
		document.addEventListener('DOMContentLoaded', () => {
			const quickActions = document.getElementById('quick-actions');
			const toggle = document.getElementById('quick-actions-toggle');
			const menu = document.getElementById('quick-actions-menu');
			
			if (!quickActions || !toggle || !menu) return;
			
			let isMenuOpen = false;
			
			// Toggle menu
			const toggleMenu = () => {
				isMenuOpen = !isMenuOpen;
				quickActions.classList.toggle('active', isMenuOpen);
				toggle.setAttribute('aria-expanded', isMenuOpen);
			};
			
			// Close menu
			const closeMenu = () => {
				isMenuOpen = false;
				quickActions.classList.remove('active');
				toggle.setAttribute('aria-expanded', 'false');
			};
			
			// Event listeners
			toggle.addEventListener('click', toggleMenu);
			
			// Close when clicking outside
			document.addEventListener('click', (e) => {
				if (!quickActions.contains(e.target)) {
					closeMenu();
				}
			});
			
			// Keyboard shortcuts
			document.addEventListener('keydown', (e) => {
				// Q key to toggle quick actions
				if (e.key.toLowerCase() === 'q' && !e.ctrlKey && !e.metaKey && !e.altKey) {
					// Only if not typing in an input field
					if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) {
						e.preventDefault();
						toggleMenu();
					}
				}
				// Escape to close
				else if (e.key === 'Escape' && isMenuOpen) {
					closeMenu();
				}
				// Number keys for quick navigation (1-6)
				else if (e.key >= '1' && e.key <= '6' && isMenuOpen) {
					e.preventDefault();
					const actionIndex = parseInt(e.key) - 1;
					const actions = menu.querySelectorAll('.quick-action');
					if (actions[actionIndex]) {
						actions[actionIndex].click();
						closeMenu();
					}
				}
			});
			
			// Add keyboard hints to tooltips
			const actions = menu.querySelectorAll('.quick-action');
			actions.forEach((action, index) => {
				const originalTitle = action.getAttribute('title');
				action.setAttribute('title', `${originalTitle} (${index + 1})`);
			});
		});
		
		// Enhanced keyboard navigation
		document.addEventListener('keydown', (e) => {
			// Skip if typing in form fields
			if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) return;
			
			// Navigation shortcuts
			if (e.ctrlKey || e.metaKey) {
				switch (e.key.toLowerCase()) {
					case 'h':
						e.preventDefault();
						document.getElementById('home')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'f':
						e.preventDefault();
						document.getElementById('features')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'r':
						e.preventDefault();
						document.getElementById('roadmap')?.scrollIntoView({ behavior: 'smooth' });
						break;
					case 'c':
						e.preventDefault();
						document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' });
						break;
				}
			}
		});
		
		// Add tooltips with keyboard shortcuts
		document.addEventListener('DOMContentLoaded', () => {
			// Add keyboard shortcut hints to navigation
			const navLinks = document.querySelectorAll('.nav-links a');
			navLinks.forEach(link => {
				const href = link.getAttribute('href');
				let shortcut = '';
				if (href === '#home' || href === '#overview') shortcut = ' (Ctrl+H)';
				else if (href === '#features') shortcut = ' (Ctrl+F)';
				else if (href === '#roadmap') shortcut = ' (Ctrl+R)';
				else if (href === '#contact') shortcut = ' (Ctrl+C)';
				
				if (shortcut) {
					const originalText = link.textContent;
					link.setAttribute('title', originalText + shortcut);
				}
			});
		});
	</script>
	
	
	<!-- Privacy-preserving analytics -->
	<script src="/assets/js/analytics.js"></script>
</body>
</html>
