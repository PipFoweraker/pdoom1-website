<!DOCTYPE html>
<html lang="en-AU">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Issues & Feedback - p(Doom)1</title>
	<link rel="canonical" href="https://pdoom1.com/issues/" />
	<meta name="description" content="Report bugs, request features, and see what we're working on. Help improve p(Doom)1 with your feedback." />
	<meta name="author" content="p(Doom)1" />
	<link rel="stylesheet" href="/css/site.css">
	<style>
		:root {
			--bg-primary: #1a1a1a;
			--bg-secondary: #2d2d2d;
			--bg-tertiary: #3d3d3d;
			--text-primary: #ffffff;
			--text-secondary: #cccccc;
			--text-muted: #aaaaaa;
			--accent-primary: #00ff41;
			--accent-secondary: #ff6b35;
			--accent-danger: #ff4444;
			--border-color: #444444;
			--success-color: #4caf50;
			--radius-sm: 4px;
			--radius-md: 6px;
			--radius-lg: 10px;
			--border-width: 1px;
			--shadow-button: 0 10px 20px rgba(0, 255, 65, 0.3);
			--duration-fast: 150ms;
			--duration-base: 300ms;
			--easing: cubic-bezier(0.2, 0.8, 0.2, 1);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Courier New', monospace;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			background-image:
				radial-gradient(circle at 25% 25%, rgba(0, 255, 65, 0.02) 0%, transparent 50%),
				radial-gradient(circle at 75% 75%, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
		}

		header {
			background: var(--bg-secondary);
			border-bottom: 2px solid var(--accent-primary);
			padding: 0.64rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		nav {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 1.6rem;
		}

		.logo-container {
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}

		.logo {
			font-size: 1.5rem;
			font-weight: bold;
			color: var(--accent-primary);
			text-decoration: none;
			text-shadow: 0 0 10px var(--accent-primary);
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			list-style: none;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			transition: color var(--duration-base) var(--easing);
			padding: 0.5rem 1rem;
			border: 1px solid transparent;
		}

		.nav-links a:hover {
			color: var(--accent-primary);
			border-color: var(--accent-primary);
		}

		main {
			max-width: 1200px;
			margin: 0 auto;
			padding: 1.6rem;
		}

		.hero {
			text-align: center;
			padding: 2rem 0;
			background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
			border-radius: var(--radius-lg);
			margin-bottom: 2.4rem;
			border: var(--border-width) solid var(--border-color);
		}

		.hero h1 {
			font-size: 2.5rem;
			margin-bottom: 1rem;
			color: var(--accent-primary);
			text-shadow: 0 0 20px var(--accent-primary);
		}

		.section {
			background: var(--bg-secondary);
			border: var(--border-width) solid var(--border-color);
			border-radius: var(--radius-md);
			padding: 1.6rem;
			margin-bottom: 1.6rem;
		}

		.section h2 {
			color: var(--accent-secondary);
			margin-bottom: 1rem;
			font-size: 1.8rem;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 1.6rem;
			margin-top: 1.6rem;
		}

		.card {
			background: var(--bg-tertiary);
			border: var(--border-width) solid var(--border-color);
			border-radius: var(--radius-md);
			padding: 1.2rem;
			transition: transform var(--duration-base) var(--easing), border-color var(--duration-base) var(--easing);
		}

		.card:hover {
			transform: translateY(-5px);
			border-color: var(--accent-primary);
		}

		.card h3 {
			color: var(--accent-primary);
			margin-bottom: 1rem;
		}

		.cta-button {
			display: inline-block;
			background: linear-gradient(45deg, var(--accent-primary), var(--success-color));
			color: var(--bg-primary);
			padding: 0.8rem 1.6rem;
			text-decoration: none;
			border-radius: var(--radius-md);
			font-weight: bold;
			transition: transform var(--duration-base) var(--easing), box-shadow var(--duration-base) var(--easing);
			border: none;
			cursor: pointer;
			font-family: inherit;
			font-size: 1rem;
		}

		.cta-button:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-button);
		}

		.cta-button-secondary {
			background: var(--accent-secondary);
		}

		/* Form Styling */
		.form-group {
			margin-bottom: 1.2rem;
		}

		label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--accent-primary);
			font-weight: bold;
		}

		input, textarea, select {
			width: 100%;
			padding: 0.8rem;
			background: var(--bg-tertiary);
			border: var(--border-width) solid var(--border-color);
			border-radius: var(--radius-sm);
			color: var(--text-primary);
			font-family: inherit;
			font-size: 1rem;
		}

		textarea {
			min-height: 150px;
			resize: vertical;
		}

		input:focus, textarea:focus, select:focus {
			outline: none;
			border-color: var(--accent-primary);
			box-shadow: 0 0 0 2px rgba(0, 255, 65, 0.2);
		}

		.form-help {
			font-size: 0.85rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		.error-message {
			font-size: 0.85rem;
			color: var(--accent-danger);
			margin-top: 0.25rem;
			display: none;
		}

		.error-message.visible {
			display: block;
		}

		/* Issue Cards */
		.issue-card {
			transition: all var(--duration-base) var(--easing);
		}

		.issue-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 255, 65, 0.15);
		}

		.issue-card.priority-issue {
			border-left: 4px solid var(--accent-danger);
		}

		.issue-label {
			display: inline-block;
			white-space: nowrap;
			padding: 2px 6px;
			border-radius: 3px;
			font-size: 0.75rem;
			margin-right: 4px;
		}

		.status-indicator {
			display: inline-block;
			width: 12px;
			height: 12px;
			border-radius: 50%;
			margin-right: 0.5rem;
			animation: pulse 2s infinite;
		}

		.status-active {
			background: var(--success-color);
		}

		@keyframes pulse {
			0% { opacity: 1; }
			50% { opacity: 0.5; }
			100% { opacity: 1; }
		}

		footer {
			background: var(--bg-secondary);
			border-top: 2px solid var(--accent-primary);
			text-align: center;
			padding: 1.6rem;
			margin-top: 3.2rem;
			color: var(--text-muted);
		}

		@media (max-width: 768px) {
			nav {
				flex-direction: column;
				gap: 1rem;
			}

			.nav-links {
				gap: 1rem;
				flex-wrap: wrap;
				justify-content: center;
			}

			.hero h1 {
				font-size: 2rem;
			}

			.issue-card h4 {
				font-size: 0.9rem;
			}

			.issue-label {
				font-size: 0.7rem !important;
				padding: 1px 4px !important;
			}
		}
	</style>
</head>
<body>
	<header>
		<nav role="navigation" aria-label="Main navigation">
			<div class="logo-container">
				<a href="/" class="logo" aria-label="p(Doom)1 home">p(Doom)1</a>
			</div>
			<ul class="nav-links" role="menubar">
				<li role="none"><a href="/" role="menuitem">Home</a></li>
				<li role="none"><a href="/issues/" role="menuitem" aria-current="page">Issues</a></li>
				<li role="none"><a href="/dashboard/" role="menuitem">Dashboard</a></li>
				<li role="none"><a href="https://github.com/PipFoweraker/pdoom1" role="menuitem" target="_blank">GitHub</a></li>
			</ul>
		</nav>
	</header>

	<main role="main">
		<section class="hero">
			<h1>Issues & Feedback</h1>
			<p style="color: var(--text-secondary); font-size: 1.1rem;">
				Help us improve p(Doom)1 by reporting bugs, requesting features, or providing feedback
			</p>
		</section>

		<!-- Quick Actions -->
		<div style="text-align: center; margin-bottom: 2rem;">
			<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
				<a href="#submit-issue" class="cta-button">Report an Issue</a>
				<a href="#known-issues" class="cta-button cta-button-secondary">View Known Issues</a>
				<a href="https://github.com/PipFoweraker/pdoom1/issues" class="cta-button" style="background: var(--bg-tertiary); color: var(--text-primary);" target="_blank" rel="noopener">GitHub Issues ‚Üí</a>
			</div>
		</div>

		<!-- Submit Issue Form -->
		<section class="section" id="submit-issue">
			<h2>Submit Feedback</h2>
			<p style="color: var(--text-secondary); margin-bottom: 2rem;">
				Tell us what's wrong or what could be better. We respect your privacy - only the information you provide will be shared.
			</p>

			<form id="issue-form" style="max-width: 700px; margin: 0 auto;">
				<div class="form-group">
					<label for="issue-type">Issue Type *</label>
					<select id="issue-type" name="issue-type" required>
						<option value="">Select type...</option>
						<option value="bug">üêõ Bug Report</option>
						<option value="feature">‚ú® Feature Request</option>
						<option value="feedback">üí¨ General Feedback</option>
						<option value="question">‚ùì Question</option>
					</select>
					<div class="form-help">What kind of feedback are you providing?</div>
				</div>

				<div class="form-group">
					<label for="issue-title">Title *</label>
					<input type="text" id="issue-title" name="title" required placeholder="Brief description of the issue" maxlength="100">
					<div class="form-help">Short, descriptive title (max 100 characters)</div>
				</div>

				<div class="form-group">
					<label for="issue-description">Description *</label>
					<textarea id="issue-description" name="description" required placeholder="Describe what happened, what you expected, and any steps to reproduce the issue..."></textarea>
					<div class="form-help">Please be as detailed as possible. Include steps to reproduce if reporting a bug.</div>
				</div>

				<div class="form-group">
					<label for="issue-version">Game Version</label>
					<input type="text" id="issue-version" name="version" placeholder="e.g., v0.5.0 or 'latest from GitHub'">
					<div class="form-help">Which version were you using when you encountered this?</div>
				</div>

				<div class="form-group">
					<label for="contact-method">Contact (Optional)</label>
					<input type="text" id="contact-method" name="contact" placeholder="Email, Discord username, or leave blank for anonymous">
					<div class="form-help">
						<strong>Privacy Note:</strong> This is optional. We'll only use this to follow up if needed. Your contact info won't be posted publicly.
					</div>
				</div>

				<div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-sm); border: 1px solid var(--accent-primary); margin-bottom: 1.5rem;">
					<h4 style="color: var(--accent-primary); margin-bottom: 0.5rem;">üîí Privacy Promise</h4>
					<p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
						Your feedback will be converted into a GitHub issue. Only the issue details you provide above will be posted publicly.
						Contact information is stored separately and never shared publicly. You can submit anonymously.
					</p>
				</div>

				<div style="text-align: center;">
					<button type="submit" class="cta-button" style="font-size: 1.1rem; padding: 1rem 2rem;">
						Submit Feedback
					</button>
				</div>

				<div id="form-status" style="margin-top: 1rem; text-align: center; font-weight: bold;"></div>
			</form>
		</section>

		<!-- Known Issues -->
		<section class="section" id="known-issues">
			<h2>
				<span class="status-indicator status-active"></span>
				Known Issues & Development Status
			</h2>
			<p style="color: var(--text-secondary);">Live updates from our development repository. See what we're working on and known issues.</p>

			<div id="github-issues-container">
				<div id="issues-loading" class="card" style="text-align: center; padding: 1.6rem;">
					<div style="color: var(--text-muted);">
						<div style="margin-bottom: 1rem;">Loading issues from GitHub...</div>
						<div style="font-size: 0.9rem;">Connecting to development repository</div>
					</div>
				</div>

				<div id="issues-error" style="display: none; text-align: center; padding: 2rem;">
					<h3 style="color: var(--accent-danger);">Connection Failed</h3>
					<p style="color: var(--text-secondary); margin: 1rem 0;">Unable to connect to GitHub API. This might be due to:</p>
					<ul style="margin: 1rem auto; padding-left: 20px; max-width: 400px; text-align: left; color: var(--text-muted);">
						<li>Temporary GitHub API limits</li>
						<li>Network connectivity issues</li>
						<li>High traffic periods</li>
					</ul>
					<p style="margin: 1rem 0;">You can still view issues directly on GitHub:</p>
					<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" class="cta-button" style="margin: 0.5rem;">
						View on GitHub ‚Üí
					</a>
					<button onclick="retryLoadIssues()" class="cta-button cta-button-secondary" style="margin: 0.5rem;">
						Retry Loading
					</button>
				</div>

				<div id="issues-content" style="display: none;">
					<div class="grid" id="issues-grid">
						<!-- Issues will be populated here -->
					</div>

					<div style="text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
						<div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
							<span id="issues-count">0</span> open issues -
							Last updated: <span id="issues-timestamp">-</span>
						</div>
						<div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
							<a href="https://github.com/PipFoweraker/pdoom1/issues" target="_blank" rel="noopener" class="cta-button cta-button-secondary">
								View All on GitHub
							</a>
							<button id="refresh-issues" class="cta-button" style="background: var(--bg-tertiary); color: var(--text-primary);">
								Refresh
							</button>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Alternative Feedback Methods -->
		<section class="section">
			<h2>Other Ways to Connect</h2>
			<div class="grid">
				<div class="card">
					<h3>üí¨ Join the Forum</h3>
					<p>Coming Soon! Discuss strategies, share stories, and connect with other players.</p>
					<p style="margin-top: 1rem; color: var(--text-muted);">
						Our community forum is in planning. Follow our <a href="/blog/" style="color: var(--accent-primary);">dev blog</a> for updates!
					</p>
				</div>
				<div class="card">
					<h3>üìß Direct Contact</h3>
					<p>For private concerns or business inquiries:</p>
					<p style="margin-top: 1rem;">
						<a href="mailto:team@pdoom1.com" style="color: var(--accent-primary); font-weight: bold;">team@pdoom1.com</a>
					</p>
				</div>
				<div class="card">
					<h3>üîó Social & Code</h3>
					<p>Follow development and contribute directly:</p>
					<div style="margin-top: 1rem;">
						<a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary); display: block; margin-bottom: 0.5rem;" target="_blank" rel="noopener">GitHub Repository ‚Üí</a>
						<a href="/blog/" style="color: var(--accent-primary); display: block;">Dev Blog ‚Üí</a>
					</div>
				</div>
			</div>
		</section>
	</main>

	<footer>
		<p>&copy; 2025 pdoom1. For fun, education, and satire only.</p>
		<p style="margin-top: 0.5rem; font-size: 0.9rem;">
			<a href="/" style="color: var(--accent-primary);">Home</a> |
			<a href="/docs/" style="color: var(--accent-primary);">Docs</a> |
			<a href="https://github.com/PipFoweraker/pdoom1" style="color: var(--accent-primary);" target="_blank" rel="noopener">GitHub</a>
		</p>
	</footer>

	<script>
		// GitHub Issues Loader (same as index.html)
		class GitHubIssuesLoader {
			constructor() {
				this.apiUrl = 'https://api.github.com/repos/PipFoweraker/pdoom1/issues';
				this.cache = null;
				this.cacheExpiry = 5 * 60 * 1000;
				this.lastFetch = 0;
			}

			async fetchIssues() {
				const now = Date.now();
				if (this.cache && (now - this.lastFetch < this.cacheExpiry)) {
					return this.cache;
				}

				try {
					const response = await fetch(this.apiUrl + '?state=open&per_page=15&sort=updated', {
						headers: { 'Accept': 'application/vnd.github.v3+json' }
					});

					if (!response.ok) throw new Error(`GitHub API error: ${response.status}`);

					const issues = await response.json();
					this.cache = issues;
					this.lastFetch = now;
					return issues;
				} catch (error) {
					console.warn('Failed to fetch GitHub issues:', error);
					throw error;
				}
			}

			formatIssueCard(issue) {
				const labels = issue.labels.map(label =>
					`<span class="issue-label" style="background: #${label.color}; color: ${this.getContrastColor(label.color)};">${label.name}</span>`
				).join('');

				const updatedDate = new Date(issue.updated_at).toLocaleDateString();
				const isPriority = issue.labels.some(l => l.name.includes('priority-high') || l.name.includes('critical'));
				const isBug = issue.labels.some(l => l.name === 'bug');
				const icon = isBug ? 'üêõ' : isPriority ? '‚ö†Ô∏è' : 'üìã';
				const cardClass = isPriority ? 'priority-issue' : '';

				return `
					<div class="card issue-card ${cardClass}">
						<div style="display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 1rem;">
							<span style="font-size: 1.2rem;">${icon}</span>
							<div style="flex: 1; min-width: 0;">
								<h4 style="margin: 0 0 0.5rem 0; font-size: 1rem; line-height: 1.3;">
									<a href="${issue.html_url}" target="_blank" rel="noopener" style="color: var(--text-primary); text-decoration: none;">
										${this.escapeHtml(issue.title)}
									</a>
								</h4>
								<div style="margin-bottom: 0.5rem;">
									${labels}
								</div>
								<div style="color: var(--text-muted); font-size: 0.8rem;">
									#${issue.number} - Updated ${updatedDate}
								</div>
							</div>
						</div>
						${isPriority ? '<div style="position: absolute; top: 8px; right: 8px; background: var(--accent-danger); color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; font-weight: bold;">HIGH PRIORITY</div>' : ''}
					</div>
				`;
			}

			escapeHtml(text) {
				const div = document.createElement('div');
				div.textContent = text;
				return div.innerHTML;
			}

			getContrastColor(hexColor) {
				const r = parseInt(hexColor.substr(0, 2), 16);
				const g = parseInt(hexColor.substr(2, 2), 16);
				const b = parseInt(hexColor.substr(4, 2), 16);
				const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
				return luminance > 0.5 ? '#000000' : '#ffffff';
			}

			async renderIssues() {
				const loadingEl = document.getElementById('issues-loading');
				const errorEl = document.getElementById('issues-error');
				const contentEl = document.getElementById('issues-content');
				const gridEl = document.getElementById('issues-grid');
				const countEl = document.getElementById('issues-count');
				const timestampEl = document.getElementById('issues-timestamp');

				loadingEl.style.display = 'block';
				errorEl.style.display = 'none';
				contentEl.style.display = 'none';

				try {
					const issues = await this.fetchIssues();
					loadingEl.style.display = 'none';
					contentEl.style.display = 'block';

					if (issues.length === 0) {
						gridEl.innerHTML = `
							<div class="card" style="text-align: center; padding: 1.6rem; grid-column: 1 / -1;">
								<div style="color: var(--success-color); margin-bottom: 1rem; font-size: 2rem;">‚úÖ</div>
								<div style="color: var(--text-muted);">No open issues! Everything is working smoothly.</div>
							</div>
						`;
					} else {
						gridEl.innerHTML = issues.map(issue => this.formatIssueCard(issue)).join('');
					}

					countEl.textContent = issues.length;
					timestampEl.textContent = new Date().toLocaleTimeString();
				} catch (error) {
					loadingEl.style.display = 'none';
					errorEl.style.display = 'block';
				}
			}
		}

		const issuesLoader = new GitHubIssuesLoader();

		document.addEventListener('DOMContentLoaded', () => {
			issuesLoader.renderIssues();

			const refreshBtn = document.getElementById('refresh-issues');
			if (refreshBtn) {
				refreshBtn.addEventListener('click', async () => {
					const originalText = refreshBtn.textContent;
					refreshBtn.textContent = 'Refreshing...';
					refreshBtn.disabled = true;

					issuesLoader.cache = null;
					issuesLoader.lastFetch = 0;
					await issuesLoader.renderIssues();

					setTimeout(() => {
						refreshBtn.textContent = originalText;
						refreshBtn.disabled = false;
					}, 1000);
				});
			}
		});

		function retryLoadIssues() {
			issuesLoader.cache = null;
			issuesLoader.lastFetch = 0;
			issuesLoader.renderIssues();
		}

		// Issue Form Submission
		document.getElementById('issue-form').addEventListener('submit', async function(e) {
			e.preventDefault();

			const formStatus = document.getElementById('form-status');
			const submitButton = e.target.querySelector('button[type="submit"]');
			const originalButtonText = submitButton.textContent;

			// Get form data
			const formData = {
				type: document.getElementById('issue-type').value,
				title: document.getElementById('issue-title').value,
				description: document.getElementById('issue-description').value,
				version: document.getElementById('issue-version').value || 'Not specified',
				contact: document.getElementById('contact-method').value || 'Anonymous'
			};

			// Disable form
			submitButton.disabled = true;
			submitButton.textContent = 'Submitting...';
			formStatus.textContent = 'Processing your feedback...';
			formStatus.style.color = 'var(--accent-primary)';

			try {
				// TODO: Replace with actual Netlify Function or backend endpoint
				// For now, create a mailto link as fallback
				const issueBody = `
**Issue Type:** ${formData.type}

**Description:**
${formData.description}

**Game Version:** ${formData.version}

**Submitted via:** pdoom1.com/issues/
${formData.contact !== 'Anonymous' ? `**Contact:** ${formData.contact}` : ''}
				`.trim();

				const subject = encodeURIComponent(`[${formData.type}] ${formData.title}`);
				const body = encodeURIComponent(issueBody);

				// Simulate submission delay
				await new Promise(resolve => setTimeout(resolve, 1000));

				formStatus.innerHTML = `
					<div style="color: var(--success-color); margin-bottom: 1rem;">‚úÖ Thank you for your feedback!</div>
					<div style="font-size: 0.9rem; color: var(--text-secondary);">
						<a href="mailto:team@pdoom1.com?subject=${subject}&body=${body}"
						   style="color: var(--accent-primary); text-decoration: underline;">
							Click here to complete submission via email
						</a>
						<p style="margin-top: 0.5rem;">Or manually create an issue on
						<a href="https://github.com/PipFoweraker/pdoom1/issues/new" target="_blank" style="color: var(--accent-primary);">GitHub</a></p>
					</div>
				`;

				// Reset form
				e.target.reset();
				submitButton.textContent = originalButtonText;
				submitButton.disabled = false;

			} catch (error) {
				formStatus.textContent = '‚ùå Submission failed. Please try again or contact us directly.';
				formStatus.style.color = 'var(--accent-danger)';
				submitButton.textContent = originalButtonText;
				submitButton.disabled = false;
			}
		});
	</script>
</body>
</html>
